define([],function(){"use strict";function changeToSuccessImg(imgWidget){imgWidget.attr("src",verifycodeSuccess);imgWidget.show()}function changeToFailImg(imgWidget){imgWidget.attr("src",verifycodeFail);imgWidget.show()}function clearVerifycodeImg(imgWidget){""!==imgWidget.src&&imgWidget.hide()}function validateVerifyCode(verifycode,imgWidget){if(""===verifycode||void 0===verifycode){clearVerifycodeImg(imgWidget);return!1}if(verifycode.length<4){changeToFailImg(imgWidget);return!1}return!0}function substrVerifyCode(verifycode){if(""===verifycode&&void 0===verifycode)return"";return verifycode.length>4?verifycode.substring(0,4):verifycode}function checkVerifyCode(imgWidget,verifycode,index,callback,iamHttpService){iamHttpService.post({"url":validUrl,"params":{"verifycode":verifycode,"index":index}}).then(function(data){if(200===data.retcode)changeToSuccessImg(imgWidget);else{changeToFailImg(imgWidget);callback()}},function(){})}function preValidVerifyCode(imgWidget,verifycode,index,callback,iamHttpService){if(!1===validateVerifyCode(verifycode,imgWidget))return;checkVerifyCode(imgWidget,substrVerifyCode(verifycode),index,callback,iamHttpService)}var verifycodeSuccess="//res.hc-cdn.com/register/6.2.209/registerui/theme/image/verifycode_success.png",verifycodeFail="//res.hc-cdn.com/register/6.2.209/registerui/theme/image/verifycode_valid.png",validUrl="/registerui/preValidVerifycode";return{"preValidVerifyCode":preValidVerifyCode}});