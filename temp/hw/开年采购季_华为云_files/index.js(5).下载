feloader.add("@cloud/pep-activity-turntable/pc/index",["@cloud/axios","@cloud/activity-iframe","@cloud/lazyload"],(function(t,e,o){o.exports=function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/build/",o(o.s=4)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function o(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,o){"use strict";var n=o(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o(1)),a=n(o(2)),r=n(o(3));o(5);var s=n(o(6)),l=n(o(7));o(11);var u=function(){function t(e){(0,i.default)(this,t),(0,r.default)(this,"$el",void 0),(0,r.default)(this,"$section",void 0),(0,r.default)(this,"$table",void 0),(0,r.default)(this,"$box",void 0),this.$el=$(e),this.$section=this.$el.find(".por-section"),this.$table=this.$el.find(".lottery-table"),this.$box=this.$el.find(".lottery-box"),s.default.getInstance(e),this.lazyload(e)}return(0,a.default)(t,[{key:"lazyload",value:function(t){var e=this;s.default.addListener(t,(function(){e.init(),e.bindEvents(),e.setBackgroundImg()}))}},{key:"setBackgroundImg",value:function(){window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var t=this.$section.attr("src-mb")?this.$section.attr("src-mb"):"",e=this.$section.attr("src-pc")?this.$section.attr("src-pc"):"",o=this.$table.attr("table-src-pc"),n=this.$table.attr("table-src-mb"),i=this.$box.attr("box-src-mb")?this.$box.attr("box-src-mb"):"",a=this.$box.attr("box-src-pc")?this.$box.attr("box-src-pc"):"",r=window.gConfig.isMobile?t:e;r&&this.$section.css("background-image",'url("'.concat(r,'")'));var s=window.gConfig.isMobile?n:o;s&&this.$table.css("background-image",'url("'.concat(s,'")'));var l=window.gConfig.isMobile?i:a;l&&this.$box.css("background-image",'url("'.concat(l,'")'))}},{key:"init",value:function(){var t=this;setTimeout((function(){s.default.getInstance(t.$el[0])}),20),new l.default({$el:this.$el})}},{key:"bindEvents",value:function(){this.$el.on("click",(function(){}))}}],[{key:"moduleName",value:function(){return"pep-activity-turntable"}}]),t}();e.default=u},function(t,e,o){},function(e,o){e.exports=t("@cloud/lazyload")},function(t,e,o){"use strict";var n=o(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o(1)),a=n(o(2)),r=n(o(3)),s=o(8),l=n(o(9));o(10);var u=$.fn.porModal.Constructor,c="",p=location.href.indexOf(".huaweicloud.com")>0?"https://portal.huaweicloud.com":"https://portal.ulanqab.huawei.com",d=p+"/api/cbc/global/csbpromotionlotteryservice/v1/lottery/participation",h=p+"/api/cbc/global/csbpromotionmanageservice/v1",f=p+"/api/cbc/global/csbpromotionlotteryservice/v1/lottery/querylotteryResult",y=s.OrderExecutor.getInstance(),g={bonusArray:[],startEle:".bonus-start",targetEle:".bonus-target",bonusInfo:"续费代金券",bonusType:"0",gameType:"0",isClick:!1,defaultNum:1},b=function(){function t(e){var o=this;(0,i.default)(this,t),(0,r.default)(this,"opts",{}),(0,r.default)(this,"$container",void 0),(0,r.default)(this,"$target",void 0),(0,r.default)(this,"$updateTimes",void 0),(0,r.default)(this,"$boxinner",void 0),(0,r.default)(this,"$el",void 0),(0,r.default)(this,"lang",void 0),(0,r.default)(this,"site",void 0),(0,r.default)(this,"langMap",{dialogTitle:{"zh-CN":"温馨提示","en-US":"Reminder"},errorLang:{508040503:{"zh-CN":"抱歉，您不符合本活动的参与条件，请留意页面内的活动规则。","en-US":"Sorry, you are not eligible for this promotion. For details, see its terms and conditions."},508040504:{"zh-CN":"抱歉，活动不存在，去看看其他活动吧。","en-US":"Sorry, the promotion cannot be found. You may try other promotions."},508040505:{"zh-CN":"抱歉，活动不存在，去看看其他活动吧。","en-US":"Sorry, the promotion cannot be found. You may try other promotions."},508040506:{"zh-CN":"抱歉，您不符合本活动的参与条件，去看看其他活动吧。","en-US":"Sorry, you are not eligible for this promotion. You may try other promotions."},508040507:{"zh-CN":"抱歉，活动已经结束，下次再来吧。","en-US":"Sorry, this promotion is over. Please come back the next time."},508040508:{"zh-CN":"抱歉，活动已经结束，下次再来吧。","en-US":"Sorry, this promotion is over. Please come back the next time."},508040516:{"zh-CN":"抱歉，您不符合本活动的参与条件，去看看其他活动吧。","en-US":"Sorry, you are not eligible for this promotion. You may try other promotions."},508040519:{"zh-CN":"抱歉，您的抽奖次数已用完！","en-US":"Sorry, your lucky draw chances have run out."},508040520:{"zh-CN":"抱歉，您的抽奖次数已用完！","en-US":"Sorry, your lucky draw chances have run out."}},defaultLangText:{"zh-CN":"系统繁忙，请稍后再试。","en-US":"The system is busy. Please try again later."},errorText:{"zh-CN":"非常抱歉，由于网络问题超时导致请求失败，请您重试，多谢！","en-US":"Sorry, your request failed due to a network problem. Please try again."},noPrizeText:{"zh-CN":"很遗憾，您没有中奖，再接再厉吧。","en-US":"Sorry, you didn't win a prize. Maybe next time."},btnOk:{"zh-CN":"确定","en-US":"OK"},btnKnow:{"zh-CN":"我知道了","en-US":"Got It"},win:{"zh-CN":"抽中","en-US":" won"},loginpc:{"zh-CN":"登录查看抽奖次数","en-US":"Log In"},loginmb:{"zh-CN":"登录","en-US":"Log In"},noList:{"zh-CN":"暂无数据","en-US":"No data available"},nodata:{"zh-CN":"小云开小差了...","en-US":"Sorry, we're unable to obtain any data right now."}});var n=this.opts;this.$el=e.$el;var a=[];$(".game-pc li:not(.bonus-start)").each((function(t,e){a.push({info:$(e).attr("bonusinfo")||"",type:$(e).attr("bonustype")||"",id:$(e).attr("bonusid")||""})})),c=$(".pep-activity-turntable").attr("id"),Object.assign(n,g,e),Object.assign(n,g,{bonusArray:a}),this.$container=$(n.targetEle),this.$target=$(n.startEle),this.$updateTimes=$(".update-times"),this.$boxinner=$(".lottery-box-inner"),this.site=document.querySelector("html").getAttribute("site")||"china",this.lang=document.querySelector("html").getAttribute("lang")||"zh-CN","hk"===this.site&&(p=location.href.indexOf(".huaweicloud.com")>0?"https://portal-intl.huaweicloud.com":"https://portal-intl.ulanqab.huawei.com",d=p+"/api/cbc/global/csbpromotionlotteryservice/v1/lottery/participation",h=p+"/api/cbc/global/csbpromotionmanageservice/v1",f=p+"/api/cbc/global/csbpromotionlotteryservice/v1/lottery/querylotteryResult"),$(document).ready((function(){s.LoginIns.getInstance().isLogin().then((function(t){if(!t.isLogin){var e='<div class="lottery-info-user-item" style="margin-top: 28px">\n            <div class="nologin lottery-info-user_link">\n            您可以点 <a href="javascript:" class="por-link-nounderline por-link-change login">登录账号</a>，查看您的参与资格及中奖情况\n            </div>\n            </div>';"en-US"===o.lang&&(e='<div class="lottery-info-user-item">\n              <div class="nologin lottery-info-user_link" style="display:block">\n              <a href="javascript:" class="por-link-nounderline por-link-change login" style="margin-right:5px">Log in  </a>to see if you\'re eligible or if you have won anything.\n              </div>\n              </div>'),$(".lottery-info-user").empty(),$(".lottery-info-user").append(e),$(".lottery-info-user").on("click","a",(function(){y.showLogin("lottery")})),$(".bonus-start").on("click","a",(function(){y.showLogin("lottery")}))}}))})),this.initInners()}return(0,a.default)(t,[{key:"showLotteryUserInfo",value:function(){var t=this;s.LoginIns.getInstance().isLogin().then((function(e){e.isLogin&&$.ajax({url:h+"/promotions/"+c+"/customers/"+e.domainId+"/quota",dataType:"json",timeout:1e4,type:"get",success:function(e){if(0===parseInt(e.retCode,10)){var o=e.promotionQuotaInfo,n=o.remainQuota<0?0:o.remainQuota;t.isMobile()?($(".lottery-info-mb #left-lotter-times-mb").text(n),$(".lottery-info-mb #used-lotter-times-mb").text(o.totalQuota-n)):($(".lottery-info-pc #left-lotter-times-pc").text(n),$(".lottery-info-pc #used-lotter-times-pc").text(o.totalQuota-n))}else"508040111"===e.retCode&&(t.isMobile()?($(".lottery-info-mb #left-lotter-times-mb").text(0),$(".lottery-info-mb #used-lotter-times-mb").text(0)):($(".lottery-info-pc #left-lotter-times-pc").text(0),$(".lottery-info-pc #used-lotter-times-pc").text(0)))},error:function(){console.log("网络异常")}})}))}},{key:"showLotteryUsers",value:function(){var t={size:16,activityId:c},e=this;$.ajax({url:f,dataType:"json",timeout:1e4,type:"post",data:JSON.stringify(t),xhrFields:{withCredentials:!0},success:function(t){if(0===parseInt(t.retCode,10)&&t.lotteryResultList.length<1)$(".lottery-list").hide();else if(0===parseInt(t.retCode,10)&&t.lotteryResultList.length>=1){$(".lottery-list-rollup").empty();var o="";t.lotteryResultList.forEach((function(t){var n=t.userName;o+='<p class="lottery-list-user"><span class="userIdWin"><span class="lottery-list-user-id">'.concat(n[0],"*****").concat(n[n.length-1],'\n    </span><span class="lottery-list-user-text1">').concat(e.langMap.win[e.lang],'</span></span><span class="lottery-list-user-text">').concat(t.prizeItemName,"</span></p>")})),$(".lottery-list-rollup").append(o),window.screen.width>1024&&t.lotteryResultList.length>6&&$(".lottery-list-rollup").addClass("lottery-list-rollup-animation")}},error:function(t){console.log("网络异常",t),$(".lottery-list").hide()}})}},{key:"isMobile",value:function(){var t=navigator&&navigator.userAgent;return t.toLowerCase().indexOf("android")>-1||/iPad/i.test(t)||/iPhone/i.test(t)}},{key:"golottery",value:function(t){var e=this;this.runDelay(this.$container.attr("data-index"),!0);var o={customerId:t.domainId,activityId:c};l.default.defaults.timeout=1e4,l.default.post(d,JSON.stringify(o),{withCredentials:!0}).then((function(t){clearInterval(e.opts.timeDelay);var o=t.data;if(e.opts.defaultNum=e.$container.attr("data-index"),e.opts.gameType=o.prizeType,e.opts.bonusInfo=o.prizeItemName,"0"===String(o.retCode))if("0"===o.prizeType){var n=e.getArrayIndex(e.opts.bonusArray,o.prizeItemName);n=n-e.opts.defaultNum-5+16+8,e.runOver(n,e.opts.defaultNum),"true"===e.$el.find(".por-section-body").attr("data-showtimes")&&e.showLotteryUserInfo()}else{var i=e.getArrayIndex(e.opts.bonusArray,o.prizeItemName);i=i-e.opts.defaultNum-5+16+8,e.runOver(i,e.opts.defaultNum),"true"===e.$el.find(".por-section-body").attr("data-showtimes")&&e.showLotteryUserInfo()}else{var a=e.langMap.defaultLangText[e.lang];u.show({title:e.langMap.dialogTitle[e.lang],text:e.langMap.errorLang[String(o.retCode)]?e.langMap.errorLang[String(o.retCode)][e.lang]:a,icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:e.langMap.btnKnow[e.lang]}]}),e.opts.isClick=!1}})).catch((function(t){e.opts.isClick=!1,clearInterval(e.opts.timeDelay),u.show({title:e.langMap.dialogTitle[e.lang],text:e.langMap.errorText[e.lang],icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:e.langMap.btnOk[e.lang]}]})}))}},{key:"initInners",value:function(){var t=this;this.isMobile()||"true"!==this.$el.find(".por-section-body").attr("data-showlist")||this.showLotteryUsers(),"true"===this.$el.find(".por-section-body").attr("data-showtimes")&&this.showLotteryUserInfo(),this.$updateTimes.on("click",(function(){t.showLotteryUserInfo()})),this.$target.on("click",(function(){t.opts.isClick||(t.opts.isClick=!0,s.LoginIns.getInstance().isLogin().then((function(e){if(e.isLogin){if("china"===t.site&&s.LoginIns.getInstance().isVerify().then((function(o){return o.isVerify?"0"===$("#left-lotter-times-pc").text()||"0"===$("#left-lotter-times-mb").text()?("0"===$("#used-lotter-times-pc").text()||"0"===$("#used-lotter-times-mb").text()?u.show({title:t.langMap.dialogTitle[t.lang],text:window.turntableMessage?window.turntableMessage.nochance:t.langMap.errorLang[508040519][t.lang],icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:t.langMap.btnOk[t.lang]}]}):u.show({title:t.langMap.dialogTitle[t.lang],text:window.turntableMessage?window.turntableMessage.chanceuseout:t.langMap.errorLang[508040519][t.lang],icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:t.langMap.btnOk[t.lang]}]}),void(t.opts.isClick=!1)):void t.golottery(e):(y.showRealName(),void(t.opts.isClick=!1))})),"hk"===t.site){if("0"===$("#left-lotter-times").text())return void u.show({title:t.langMap.dialogTitle[t.lang],text:t.langMap.errorLang[508040519][t.lang],icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:t.langMap.btnOk[t.lang]}]});t.golottery(e)}}else t.opts.isClick=!1})))}))}},{key:"runOver",value:function(t,e){var o=this,n=0,i=e,a=[1,2,3,6,9,8,7,4],r=setInterval((function(){i++,n++,t===n&&(clearInterval(r),o.runEnd(i)),o.changeIndex(a[(i-1)%8])}),200)}},{key:"runDelay",value:function(t,e){var o=this,n=t;this.opts.timeDelay=setInterval((function(){9===++n&&(n=1),o.changeIndex(n)}),200)}},{key:"runEnd",value:function(t){var e=this,o=t,n=[1,2,3,6,9,8,7,4];setTimeout((function(){o++,e.changeIndex(n[(o-1)%8])}),500),setTimeout((function(){o++,e.changeIndex(n[(o-1)%8])}),1100),setTimeout((function(){o++,e.changeIndex(n[(o-1)%8])}),2e3),setTimeout((function(){o++,e.changeIndex(n[(o-1)%8])}),3200),setTimeout((function(){o++,e.changeIndex(n[(o-1)%8]),setTimeout((function(){e.showGameInfo()}),500)}),4700)}},{key:"changeIndex",value:function(t){var e=t;this.$container.attr("data-index",e)}},{key:"showGameInfo",value:function(){if(this.opts.isClick=!1,"0"===this.opts.bonusType)u.show({title:this.langMap.dialogTitle[this.lang],text:this.langMap.noPrizeText[this.lang],icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:this.langMap.btnKnow[this.lang]}]});else if("1"===this.opts.bonusType){var t={"zh-CN":"<span>恭喜您，获得"+this.opts.bonusInfo+"，</span>请在页面中完善您的收货地址信息，礼品会在活动结束后邮寄给您。","en-US":"<span>Congratulations! You have won a "+this.opts.bonusInfo+". </span>Please complete your shipping address on this page. We'll mail the prize to you after the promotion is over."};u.show({title:this.langMap.dialogTitle[this.lang],text:t[this.lang],icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:this.langMap.btnKnow[this.lang]}]})}else if("2"===this.opts.bonusType){var e={"zh-CN":"<span>恭喜您，获得"+this.opts.bonusInfo+'，</span>可在<a target="_blank" href="https://account.huaweicloud.com/usercenter/?locale=zh-cn&region=cn-south-1#/userindex/coupons">优惠与折扣</a>页面查看。',"en-US":"<span>Congratulations! You have won a "+this.opts.bonusInfo+'. </span>You can view the prize on the <a target="_blank" href="https://account.huaweicloud.com/usercenter/?locale=en-us&region=cn-south-1#/userindex/coupons">Coupons and Discounts</a> page。'};u.show({title:this.langMap.dialogTitle[this.lang],text:e[this.lang],icon:"prompt",buttons:[{style:u.buttonStyle.primary,text:this.langMap.btnKnow[this.lang]}]})}}},{key:"getArrayIndex",value:function(t,e){for(var o=t.length,n=[1,2,3,6,9,8,7,4];o--;)if(t[o].info===e)return this.opts.bonusType=t[o].type,n.indexOf(o>3?o+2:o+1)+1;return-1}}]),t}();e.default=b},function(e,o){e.exports=t("@cloud/activity-iframe")},function(e,o){e.exports=t("@cloud/axios")},function(t,e,o){},function(t,e,o){}])}));