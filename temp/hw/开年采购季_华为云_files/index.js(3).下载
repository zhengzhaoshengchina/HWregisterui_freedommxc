feloader.add("@cloud/pep-activity-livenotice/pc/index",["@cloud/dialog","@cloud/activity-api","@cloud/lazyload","@cloud/portal-utils","@cloud/activity-iframe"],(function(t,e,n){n.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/build/",n(n.s=6)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(e,n){e.exports=t("@cloud/activity-iframe")},function(e,n){e.exports=t("@cloud/portal-utils")},function(t,e,n){"use strict";var i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(7)),r=i(n(1)),s=i(n(2)),a=i(n(3));n(13),n(14);var l=n(4),u=i(n(15)),d=i(n(16)),c=i(n(17)),f=n(5),p=i(n(18)),v=function(){function t(e){(0,r.default)(this,t),(0,a.default)(this,"$el",void 0),(0,a.default)(this,"statusTexts",void 0),(0,a.default)(this,"superIndex",void 0),(0,a.default)(this,"now",void 0),(0,a.default)(this,"swiperContainer",void 0),(0,a.default)(this,"pre",void 0),(0,a.default)(this,"next",void 0),(0,a.default)(this,"bullets",void 0),(0,a.default)(this,"swiperItem",void 0),(0,a.default)(this,"mySwiper",void 0),this.$el=$(e),this.superIndex=1,this.now=Date.now(),this.swiperContainer=this.$el.find(".swiper-container"),this.pre=this.$el.find(".por-icon-left"),this.next=this.$el.find(".por-icon-right"),this.bullets=this.$el.find(".por-carousel-bullet"),this.swiperItem=this.$el.find(".swiper-slide"),this.mySwiper=null,u.default.getInstance(e),this.lazyload(e)}return(0,s.default)(t,[{key:"lazyload",value:function(t){var e=this;u.default.addListener(t,(function(){e.setStatus(),e.setH5Scroll(),e.initCarousel(),e.bindEvents()}))}},{key:"setCountdown",value:function(t){var e=f.time.parseTime(new Date(t+288e5),"{y}-{m}-{d} {h}:{i}:{s}"),n=new d.default({dueDate:e,container:".live-countdown-text",format:"dd-hh-mm-ss"});t>Date.now()&&n.start()}},{key:"setStatus",value:function(){var t=this;this.statusTexts||(this.statusTexts=this.$el.find(".por-section-body").attr("data-status").split(","));var e,n=(0,o.default)(this.statusTexts,4),i=n[0],r=n[1],s=n[2],a=n[3],l=!1;this.$el.find(".live-content").each((function(n,u){var d=!0;$(u).find(".live-card").each((function(n,u){var c,f,p=$(u),v=p.find(".reserve-live-btn"),h=p.find(".por-label"),x=new Date(p.attr("date-start").replace(/\-/g,"/")).getTime(),y=new Date(p.attr("date-end").replace(/\-/g,"/")).getTime(),m=Date.now(),g=h.attr("data-class").split(","),b=(0,o.default)(g,4),w=b[0],S=b[1],I=b[2],_=b[3],M=p.hasClass("swiper-slide");m<x?(c=d?s:i,f=d?I:w,M&&d&&(t.superIndex=n,e=x),d=!1,v.css("display","inline-block"),l=!0):m<y?(d=!1,M&&(t.superIndex=n),c=r,f=S):(d=!0,c=a,f=_),h.removeClass(g.join(" ")).addClass(f),M?h.next().text(c):h.text(c)}))})),l?this.setCountdown(e||Date.now()):this.$el.find("#live-countdown-container").hide()}},{key:"setH5Scroll",value:function(){var t=this.$el.find(".live-timeline-H5");t.length&&(t.find(".live-item").eq(this.superIndex)[0].scrollIntoView(),t.find(".progress-image").css("background-image","url(".concat(t.find(".live-item").eq(this.superIndex).attr("data-src"))))}},{key:"initCarousel",value:function(){this.mySwiper=new c.default(this.$el[0],{initialIndex:this.superIndex,preview:5,activeWidth:560,spaceBetween:4,prevEl:this.pre[0],nextEl:this.next[0],paginationEl:this.$el.find(".por-carousel-pagination")[0],slideCB:this.getLiveReserveStatus})}},{key:"getLiveReserveStatus",value:function(t,e){new u.default(e[0]).refresh(),l.LoginIns.getInstance().isLogin().then((function(e){e.isLogin&&(t.attr("reserve-status")||p.default.refreshLiveReserveStatus(t,e.domainId))}))}},{key:"bindEvents",value:function(){this.$el.find(".reserve-live-btn").on("click",(function(t){var e=t.currentTarget;p.default.reserveBtnEvent(e)}))}}],[{key:"moduleName",value:function(){return"pep-activity-livenotice"}}]),t}();e.default=v},function(t,e,n){var i=n(8),o=n(9),r=n(10),s=n(12);t.exports=function(t,e){return i(t)||o(t,e)||r(t,e)||s()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return n}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var i=n(11);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){},function(t,e,n){},function(e,n){e.exports=t("@cloud/lazyload")},function(t,e,n){"use strict";var i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(1)),r=i(n(2)),s=i(n(3)),a=function(){function t(e){(0,o.default)(this,t),(0,s.default)(this,"format",void 0),(0,s.default)(this,"dueDate",void 0),(0,s.default)(this,"endTime",void 0),(0,s.default)(this,"container",void 0),(0,s.default)(this,"formMap",void 0),this.dueDate=e.dueDate,this.endTime=new Date(this.dueDate.replace(/\-/g,"/")).getTime()-288e5,this.container=e.container||"body",this.format=e.format||"dd-hh-mm-ss",this.formMap={dd:{class:"countdown-day-show",unit:"天"},hh:{class:"countdown-hour-show",unit:"时"},mm:{class:"countdown-minute-show",unit:"分"},ss:{class:"countdown-second-show",unit:"秒"}},this.init()}return(0,r.default)(t,[{key:"init",value:function(){var t=this,e=this.format.split("-"),n="";e.forEach((function(e){n+='\n            <div class="countdown-data">\n            <div class="countdown-data-num">\n                <p class="countdown-data-num-text" '.concat(t.formMap[e].class,'>0</p>\n            </div>\n            <div class="countdown-data-num">\n                <p class="countdown-data-num-text" ').concat(t.formMap[e].class,'>0</p>\n            </div>\n            <p class="countdown-data-unit">').concat(t.formMap[e].unit,"</p>\n        </div>")})),$(this.container).append(n)}},{key:"start",value:function(){var t=this;!function e(){var n=new Date,i=t.endTime-n.getTime(),o=Math.floor(i/864e5),r=t.format.match(/d/i)?Math.floor(i/36e5)%24:Math.floor(i/36e5),s=t.format.match(/h/i)?Math.floor(i/6e4)%60:Math.floor(i/1e3),a=Math.floor(i/1e3)%60,l={dd:o<10?"0"+o:o.toString(),hh:r<10?"0"+r:r.toString(),mm:s<10?"0"+s:s.toString(),ss:a<10?"0"+a:a.toString()};a>=0&&t.format.split("-").forEach((function(e){for(var n=l[e],i=0;i<2;i++)$(t.container).find("[".concat(t.formMap[e].class,"]")).eq(i).html(n[i])}));setTimeout((function(){e()}),1e3)}()}}]),t}();e.default=a},function(t,e,n){"use strict";var i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(1)),r=i(n(2)),s=i(n(3));function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){(0,s.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={initialIndex:0,preview:5,activeWidth:560,spaceBetween:4,duration:400},d=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,o.default)(this,t),(0,s.default)(this,"$el",void 0),(0,s.default)(this,"$wrapper",void 0),(0,s.default)(this,"$slides",void 0),(0,s.default)(this,"$prevEl",void 0),(0,s.default)(this,"$nextEl",void 0),(0,s.default)(this,"$pagination",void 0),(0,s.default)(this,"activeIndex",void 0),(0,s.default)(this,"options",void 0),(0,s.default)(this,"itemWidth",void 0),this.$el=$(e),this.$wrapper=this.$el.find(".swiper-wrapper"),this.$slides=this.$wrapper.find(".swiper-slide"),this.options=l(l({},u),n),this.options.prevEl&&(this.$prevEl=$(this.options.prevEl)),this.options.nextEl&&(this.$nextEl=$(this.options.nextEl)),this.options.paginationEl&&(this.$pagination=$(this.options.paginationEl)),this.activeIndex=this.options.initialIndex,this.initSlides(),this.initPrevNextButton(),this.initPagition()}return(0,r.default)(t,[{key:"slideTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.duration,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.activeIndex=Math.min(Math.max(t,0),this.$slides.length-1),this.$slides.removeClass("active").eq(t).addClass("active"),n&&this.$el.trigger("slideChange");var i=Math.min(Math.max(t,1),this.$slides.length-4),o=-(i-1)*(this.itemWidth+this.options.spaceBetween);this.$wrapper.css({transition:"".concat(e,"ms"),transform:"translate3d(".concat(o,"px, 0px, 0px)")}),this.options.slideCB&&this.options.slideCB(this.$slides.eq(t).find(".reserve-live-btn"),this.$el)}},{key:"initSlides",value:function(){var t=this,e=this.options,n=e.preview,i=e.activeWidth,o=e.spaceBetween,r=function(){t.itemWidth=(t.$wrapper.width()-(n-1)*o-i)/(n-1),t.$slides.width(t.itemWidth),t.slideTo(t.activeIndex,0,!1)};r(),this.$slides.eq(this.activeIndex).addClass("active"),this.$slides.on("click",(function(e){var n=$(e.currentTarget).index();t.slideTo(n)})),$(window).resize((function(){r()}))}},{key:"initPrevNextButton",value:function(){var t=this;this.$prevEl&&this.$prevEl.on("click",(function(){t.slideTo(Math.max(t.activeIndex-1,0))})),this.$nextEl&&this.$nextEl.on("click",(function(){t.slideTo(Math.min(t.activeIndex+1,t.$slides.length-1))}));var e=function(){t.$prevEl&&t.$prevEl.toggleClass("disabled",0===t.activeIndex),t.$nextEl&&t.$nextEl.toggleClass("disabled",t.activeIndex===t.$slides.length-1)};this.$el.on("slideChange",(function(){e()})),e()}},{key:"initPagition",value:function(){var t=this,e=function(){t.$pagination&&t.$pagination.children().removeClass("active").eq(t.activeIndex).addClass("active")};this.$el.on("slideChange",(function(){e()})),e()}}]),t}();e.default=d},function(t,e,n){"use strict";var i=n(19),o=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(1)),s=o(n(2)),a=o(n(3)),l=o(n(21)),u=i(n(22));n(23);var d=n(4);n(24);var c=n(5),f=d.OrderExecutor.getInstance(),p=function(){function t(){(0,r.default)(this,t),(0,a.default)(this,"bindBannerBtn",void 0)}return(0,s.default)(t,null,[{key:"reserveBtnEvent",value:function(t){var e=this;d.LoginIns.getInstance().isLogin().then((function(n){if(n.isLogin){var i=t.getAttribute("voteid");t.getAttribute("reserve-status")&&"canceled"!==t.getAttribute("reserve-status")?c.func.throttle(e.cancelReservedLive(t,Number(i),n.domainId),1e3,2):c.func.throttle(e.reserveLive(t,Number(i),n.domainId),1e3,2)}else f.showLogin()}))}},{key:"reserveLive",value:function(t,e,n){var i=this;l.default.voteUser(n,e,[{voteActivityItemId:"1",voteValue:"reserved",needEncrypt:1}]).then((function(e){0===e.data.retCode?(i.showSuccessDialog(t.getAttribute("successtip"),t.getAttribute("liveLink")),t.setAttribute("reserve-status","reserved"),t.innerText="取消预约",t.classList.add("reserve-live-btn-success")):i.showReserveErrorDialog()}))}},{key:"cancelReservedLive",value:function(t,e,n){var i=this;l.default.voteUser(n,e,[{voteActivityItemId:"1",voteValue:"cancel",needEncrypt:1}]).then((function(e){0===e.data.retCode?(t.setAttribute("reserve-status","canceled"),t.innerText="预约直播",t.classList.remove("reserve-live-btn-success")):i.showCancelErrorDialog()}))}},{key:"refreshLiveReserveStatus",value:function(t,e){var n=t.attr("voteid");l.default.queryvoteresultstatistics(e,Number(n)).then((function(e){e.data.voteResultStatisticsList.length>0&&"reserved"===e.data.voteResultStatisticsList.pop().voteValue&&(t.attr("reserve-status","reserved"),t.text("取消预约"),t.addClass("reserve-live-btn-success"))})).catch((function(t){console.error(t)}))}},{key:"reserveAllLives",value:function(t,e){}},{key:"showSuccessDialog",value:function(t,e){var n=[{text:"我知道了"}];e&&n.push({text:"前往专场",className:"cancel",onclick:function(){window.open(e)}}),new u.default({title:"预约成功！",icon:u.IIconStyle.SUCCESS,content:t||"我们将在开播前通知您～",buttons:n}).open()}},{key:"showReserveErrorDialog",value:function(){new u.default({title:"预约失败",icon:u.IIconStyle.INFO,content:"哎呀，出错了，请您稍后再试。",buttons:[{text:"我知道了"}]}).open()}},{key:"showCancelErrorDialog",value:function(){new u.default({title:"出错了",icon:u.IIconStyle.INFO,content:"抱歉，取消预约失败，请您稍后再试～",buttons:[{text:"我知道了"}]}).open()}},{key:"showAllSuccessDialog",value:function(){new u.default({title:"预约成功！",icon:u.IIconStyle.SUCCESS,content:"我们将在开播前通过【xxxxx】通知您",buttons:[{text:"我知道了"}]}).open()}}]),t}();e.default=p},function(t,e,n){var i=n(20).default;function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==i(t)&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(e,n){e.exports=t("@cloud/activity-api")},function(e,n){e.exports=t("@cloud/dialog")},function(t,e,n){},function(t,e,n){}])}));