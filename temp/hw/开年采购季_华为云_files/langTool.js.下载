"use strict";(function(){function LanguageTool(){}LanguageTool.prototype.setPageLanguage=function(){function getLocaleFromUrl(){var service,index,key,value,searchStr=decodeURIComponent(decodeURIComponent(window.location.search.substring(1))),params=searchStr.split("&");for(index=0;index<params.length;index++){key=params[index].substring(0,params[index].indexOf("="));if("locale"===key){value=params[index].substring(params[index].indexOf("=")+1);return decodeURIComponent(value)}"service"===key&&(service=params[index].substring(params[index].indexOf("=")+1))}return getLocaleFromService(service)}function getLocaleFromService(service){var serviceParam,serviceParams,index,key,value;if(service){serviceParam=service.split("?");if(serviceParam.length>1){serviceParams=serviceParam[1].split("&");for(index=0;index<serviceParams.length;index++){key=serviceParams[index].substring(0,serviceParams[index].indexOf("="));if("locale"===key){value=serviceParams[index].substring(serviceParams[index].indexOf("=")+1);return decodeURIComponent(value)}}}}return}function getLocaleFromCookie(){var c_start,c_end,cookieName="locale";if(document.cookie.length>0){c_start=document.cookie.indexOf(cookieName+"=");if(-1!=c_start){c_start=c_start+cookieName.length+1;c_end=document.cookie.indexOf(";",c_start);-1==c_end&&(c_end=document.cookie.length);return decodeURIComponent(document.cookie.substring(c_start,c_end))}}return}var locale=getLocaleFromUrl();locale||(locale=getLocaleFromCookie());locale?-1===window.location.href.indexOf("/cn/")&&-1===window.location.href.indexOf("/hcso/")||"zh-cn"!==locale&&"en-us"!==locale&&(locale="zh-cn"):locale=-1!==window.location.href.indexOf("/intl/")?"en-us":-1!==window.location.href.indexOf("/cn/")||-1!==window.location.href.indexOf("/hcso/")?"zh-cn":"HWC_HK"===SITE_CONFIG?"en-us":"zh-cn";locale=locale.substr(0,5);this.setLocale(locale)};LanguageTool.prototype.setLocale=function(locale){window.language=locale;this.updateLocaleInCookie(locale);var tinyLang=locale.substring(0,2);document.cookie="tiny_language="+tinyLang+";secure"};LanguageTool.prototype.getLocale=function(){return window.language};LanguageTool.prototype.addCssToPage=function(href){var head=document.getElementsByTagName("head")[0],cssLink=document.createElement("link");cssLink.type="text/css";cssLink.rel="stylesheet";cssLink.href=href;head.appendChild(cssLink)};LanguageTool.prototype.updateLocaleInCookie=function(value){var cookieStr,expiresTime,date;void 0!=this.getLocaleFromCookie()&&this.delLocaleFromCookie();cookieStr="locale="+encodeURIComponent(value);expiresTime=2592e6;date=new Date;date.setTime(date.getTime()+expiresTime);cookieStr+=";domain="+this.getParentDomain()+";Path=/;expires="+date.toUTCString()+";secure";document.cookie=cookieStr};LanguageTool.prototype.getLocaleFromCookie=function(){var i,arr,cookieStr=document.cookie,cookieArray=cookieStr.split(";");for(i=0;i<cookieArray.length;i++){arr=this.iamTrim(cookieArray[i].toString()).split("=");if("locale"===arr[0])return decodeURIComponent(arr[1])}return};LanguageTool.prototype.delLocaleFromCookie=function(){var date=new Date;date.setTime(date.getTime()-1e4);document.cookie="locale=v;domain="+this.getParentDomain()+";Path=/;expires="+date.toUTCString()};LanguageTool.prototype.iamTrim=function(text){var rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return null==text?"":String(text).replace(rtrim,"")};LanguageTool.prototype.getParentDomain=function(){var reg=/^((\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.){3}(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,hostName=window.location.hostname;return reg.test(hostName)?hostName:hostName.substr(hostName.indexOf("."))};window.IAM||(window.IAM={});window.IAM.LanguageTool=LanguageTool})();