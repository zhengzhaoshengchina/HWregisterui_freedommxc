function collectBehavior(eventCategory,eventAction,eventLabel,eventValue,jsonParam,customerId,uorParams){try{collectEvent(eventCategory,eventAction,eventLabel,eventValue,JSON.stringify(jsonParam),customerId,uorParams)}catch(e){}}function collectPageView(customerId,uorExtParams){var jsonParam,pageUrl,hw_abi,abiJson;try{jsonParam={"previousPage":document.referrer};pageUrl=window.location.href;if(getUrlParams().bpInvite){jsonParam.visitUrl=pageUrl;jsonParam.traceId=getUrlParams().bpInvite;jsonParam.step=4;jsonParam.stepResult="CBC.0000|success"}if(getCookieValue("hw_abi")){hw_abi=getCookieValue("hw_abi");abiJson=JSON.parse(hw_abi);if(abiJson.n){jsonParam.visitUrl=pageUrl;jsonParam.traceId=abiJson.n;jsonParam.step=4;jsonParam.stepResult="CBC.0000|success"}}collectEvent(buildEventCategory(),"pageView","","",JSON.stringify(jsonParam),customerId,uorExtParams)}catch(e){}}function collectEvent(a,b,c,d,json,customerId,uorParams){var expireTime,pageUrl,channelFrom,mobilePhone,email,domainArea,countryCode,jsonObj,sessionId=getCookieValue("vk");if(!sessionId){expireTime=864e5;sessionId=guidGenerator();addCookieValue("SessionID",sessionId,expireTime)}pageUrl=window.location.href;pageUrl&&pageUrl.length>510&&(pageUrl=pageUrl.substring(0,510));channelFrom=getUrlParams().channelFrom?getUrlParams().channelFrom:"";channelFrom&&channelFrom.length>20&&(channelFrom=channelFrom.substring(0,20));mobilePhone="";email="";domainArea="";countryCode="";if(uorParams){jsonObj=JSON.parse(uorParams);mobilePhone=jsonObj.mobilePhone;domainArea=jsonObj.domainArea;countryCode=jsonObj.countryCode;email=jsonObj.email}$.ajax({"url":"/registerui/rest/cbc/cbccustomerregservice/v1/util/uor","type":"post","contentType":"application/json; charset=utf-8","dataType":"json","data":JSON.stringify({"visitKey":sessionId||"","eventCategory":a||"","eventAction":b||"","eventLabel":c||"","eventValue":d||"","pageName":pageUrl,"customerId":customerId||"","domainArea":domainArea,"countryCode":countryCode,"channelFrom":channelFrom,"jsonParam":json||"","mobilePhone":mobilePhone||"","email":email||""}),"headers":{"X-REG-SITE-TYPE":PAGE_SITE.toUpperCase()},"success":function(data){},"error":function(){}})}function getUrlParams(){var index,key,value,urlParams={},searchStr=window.location.search.substring(1),params=searchStr.split("&");for(index=0;index<params.length;index++){key=params[index].substring(0,params[index].indexOf("="));value=params[index].substring(params[index].indexOf("=")+1);urlParams[key]=decodeURIComponent(value)}return urlParams}function getCookieValue(cname){var i,c,name=cname+"=",ca=document.cookie.split(";");for(i=0;i<ca.length;i++){c=ca[i].trim();if(0===c.indexOf(name))return c.substring(name.length,c.length)}return""}function addCookieValue(name,value,expiresMillis,path){var cookieStr,expiresTime,date;hasCookieValue(name)&&delCookieValue(name);value&&(cookieStr=name+"="+encodeURIComponent(value));expiresTime=Number(expiresMillis);if(!isNaN(expiresTime)&&expiresTime>0){date=new Date;date.setTime(date.getTime()+expiresTime);cookieStr+=path?";path="+path+"; expires="+date.toUTCString():"; expires="+date.toUTCString()}value&&(document.cookie=cookieStr+";secure")}function delCookieValue(name){var date=new Date;date.setTime(date.getTime()-1e4);document.cookie=name+"=v; expires="+date.toUTCString()}function hasCookieValue(name){return void 0!==getCookieValue(name)}function guidGenerator(){var d=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;d=Math.floor(d/16);return("x"==c?r:3&r|8).toString(16)})}function onAccountCloudBi(code){var name,ev="success";1==code?ev="账号名格式错误":2==code&&(ev="账号名已被注册");send2CloudBI(buildEventCategory(),"input","accountNameId",ev);if(1==code){name=$("#accountNameId").val();name||(name=$("#NAME").val())}}function onPasswordCloudBi(code){var ev="success";1==code?ev="密码格式错误":2==code?ev="密码包含账号名":3==code?ev="密码包含手机号":4==code?ev="密码为弱密码":5==code&&(ev="密码包含邮箱");send2CloudBI(buildEventCategory(),"input","passwordId",ev)}function onConfirmPasswordCloudBi(code){var ev="success";1==code&&(ev="确认密码输入错误");send2CloudBI(buildEventCategory(),"input","confirmPasswordId",ev)}function onPhoneCloudBi(code){var ev="success";1==code?ev="手机号格式错误":2==code&&(ev="手机号已被注册");send2CloudBI(buildEventCategory(),"input","phoneId",ev)}function onEmailCloudBi(code){var ev="success";1==code?ev="邮箱格式错误":2==code&&(ev="邮箱已被注册");send2CloudBI(buildEventCategory(),"input","emailId",ev)}function onMsgCodeSend(isPhoneValidate,value,uorParams){var verifyType=isPhoneValidate?"phone":"email";send2CloudBI(buildEventCategory(),"click","reqMsgCode",verifyType);collectBehavior(buildEventCategory(),"click",verifyType+"-reqMsgCode","success",value||"","",uorParams)}function onGeetestResult(eventValue,uorParams){collectBehavior(buildEventCategory(),"slide","GeetestMsgCode",eventValue,"","",uorParams)}function onGeetestInit(eventValue,sessionId){var jsonParam={"sessionId":sessionId};collectBehavior(buildEventCategory(),"init","GeetestInit",eventValue,jsonParam,"","")}function onContainZeroWidthChar(value){var client=navigator.userAgent;send2CloudBI(buildEventCategory(),"input","zeroWidth",client+":'"+value+"'")}function onMsgCodeCloudBi(code,extend,uorExtParams){var ev="success";1==code&&(ev="验证码格式错误");send2CloudBI(buildEventCategory(),"input","msgCodeId",ev);collectBehavior(buildEventCategory(),"input","msgCodeId",ev,extend,"",uorExtParams)}function onAgreeBindBpClick(checked){var ev="勾选";!1===checked&&(ev="取消勾选");send2CloudBI(buildEventCategory(),"click","bindbpcheckbox",ev)}function onAgreeClick(code){var ev=code?"勾选":"取消勾选";send2CloudBI(buildEventCategory(),"click","agreecheckbox",ev)}function onRegionQuery(){send2CloudBI(buildEventCategory(),"query","defaultRegion",currentRegion)}function onReceivePromotionClick(code){var ev="勾选";0==code&&(ev="取消勾选");send2CloudBI(buildEventCategory(),"click","receivePromotionalInfo",ev)}function onRemindLoginClick(code){var ev="立即登录";1==code&&(ev="继续注册");send2CloudBI(buildEventCategory(),"click","loginOrRegister",ev)}function buildEventCategory(location){var ec="reg_"+PAGE_SITE+"_"+window.language+"_"+PAGE_NAME;location&&(ec+="_"+location);return ec}function autoEventTracking(){$("body").find("a").each(function(){var _this=$(this);_this.bind("click",function(){var ec=buildEventCategory(_this.attr("data-location")),el=$.trim(_this.text());el?send2CloudBI(ec,"click",el,""):"navigation"==_this.attr("data-location")?send2CloudBI(ec,"click","logo_"+_this.attr("href"),""):send2CloudBI(ec,"click","gov_"+_this.attr("href"),"")})})}function onNextStep(code,extend,uorExtParams){var ev=buildEventValue(code,extend);send2CloudBI(buildEventCategory(),"click","nextStepBtn",ev);collectBehavior(buildEventCategory(),"click","nextStepBtn",ev,extend,"",uorExtParams)}function buildEventValue(code,extend){return{"200":"success","404":"参数格式错误","CBC.0000":"success","CBC.0100":"参数校验错误","CBC.0151":"无权限","CBC.7241":"滑块验证码校验失败","CBC.7248":"图片验证码校验失败","CBC.7243":"验证码发送失败","CBC.7196":"IP黑名单","CBC.7197":"IP限频错误","CBC.7198":"设备ID限频错误","CBC.7199":"机器脚本操作","CBC.7239":"黑邮箱情报","CBC.7250":"黑手机情报","CBC.7151":"验证码失效","CBC.7152":"验证码错误","CBC.7156":"账号名已被注册","CBC.7184":"邮箱已被注册","CBC.7185":"手机号已被注册","CBC.7209":"手机号注册数超限"}[code||"CBC.0000"]||"系统错误_"+code}function beginRegisterCloudBi(isPhoneValidate){var verifyType=isPhoneValidate?"phone":"email";send2CloudBI(buildEventCategory(),"click","beginSubmitBtn",verifyType)}function buildUorExtParams(mobilePhone,countryCode,email,domainArea){var obj={"mobilePhone":mobilePhone,"countryCode":countryCode,"email":email,"domainArea":domainArea};return JSON.stringify(obj)}function onSubmitStep1(code,domainId,extend,jsonParam,uorParams){if(200===code){initialCloudBI(domainId);send2CloudBI(buildEventCategory(),"click","registerSubmitBtn","success",{"D2":"RegisterSuccess","D3":getServiceParamValue()});collectBehavior(buildEventCategory(),"click","registerSubmitBtn","success",{"customerId":domainId},domainId,uorParams)}else{send2CloudBI(buildEventCategory(),"click","registerSubmitBtn",buildEventValue(code,extend));collectBehavior(buildEventCategory(),"click","registerSubmitBtn",buildEventValue(code,extend),jsonParam,"",uorParams)}}function onRegisterSuccess(){send2CloudBI(buildEventCategory(),"click","registerSuccess","success")}function onRegionCloudBi(code){var ev="success";1==code&&(ev="国家或地区格式错误");send2CloudBI(buildEventCategory(),"click","regionId",ev)}function buildSendVerifyCodeValue(code){return{"CBC.0000":"success","CBC.7241":"滑块验证码校验失败","CBC.7248":"图片验证码校验失败","CBC.7243":"验证码发送失败","CBC.7196":"IP黑名单","CBC.7197":"IP限频错误","CBC.7198":"设备ID限频错误","CBC.7199":"机器脚本操作","CBC.7239":"黑邮箱情报","CBC.7250":"黑手机情报","CBC.7184":"邮箱已被注册","CBC.7185":"手机号已被注册","CBC.7209":"手机号注册数超限"}[code||"CBC.0000"]||"验证码发送失败_"+code}function onGeetestCloudBi(code){var ev=buildSendVerifyCodeValue(code);send2CloudBI(buildEventCategory(),"click","geetest",ev)}function upToCloudBI(type,code,uorExtParams){"name"==type?$("#accountNameId").hasClass("ti-validate-error")?onAccountCloudBi(code?code:1):onAccountCloudBi():"phone"===type?$("#phoneId").hasClass("ti-validate-error")?onPhoneCloudBi(code?code:1):onPhoneCloudBi():"email"===type?$("#registerEmailId").hasClass("ti-validate-error")?onEmailCloudBi(code?code:1):onEmailCloudBi():"msgCode"===type?$("#msgCodeId").hasClass("ti-validate-error")?onMsgCodeCloudBi(1,"",uorExtParams):onMsgCodeCloudBi("","",uorExtParams):"comfirmPwd"===type&&($("#confirmPasswordId").hasClass("ti-validate-error")?onConfirmPasswordCloudBi(1):onConfirmPasswordCloudBi())}function onInitBindTypeSuccess(type){send2CloudBI(buildEventCategory(),"pageview","initXaccountInfo","success_"+type)}function onInitBindTypeInvalid(){send2CloudBI(buildEventCategory(),"pageview","initXaccountInfo","无效访问")}function onInitBindTypeFailed(error_code){var UBA_CODE_INFO_MAP={"CBC.0151":"无权限","CBC.0100":"参数校验错误","CBC.0999":"系统错误","CBC.7246":"ticket失效"},ev=UBA_CODE_INFO_MAP[error_code]||"初始化第三方信息失败_"+error_code;send2CloudBI(buildEventCategory(),"pageview","initXaccountInfo",ev)}function onBindOrCreate(isCreate){var value=isCreate?"创建账号":"绑定账号";send2CloudBI(buildEventCategory(),"click","bindSwitch",value)}function onBeginCreate(type){var label=1===type?"beginCreateAccount":"beginActiveAccount";send2CloudBI(buildEventCategory(),"click",label,"")}function onCreateSuccess(domainId){domainId&&initialCloudBI(domainId);send2CloudBI(buildEventCategory(),"click","registerSubmitBtn","success",{"D2":"RegisterSuccess","D3":getServiceParamValue()});collectBehavior(buildEventCategory(),"click","registerSubmitBtn","success","",domainId,"")}function onCreateFailed(err,type){var error_code=err&&err.responseJSON&&err.responseJSON.error_code,UBA_CODE_INFO_MAP={"CBC.0151":"无权限","CBC.0100":"参数校验错误","CBC.0999":"系统错误","CBC.7151":"验证码失效","CBC.7152":"验证码错误","CBC.7244":"伙伴不具备分销商资格","CBC.7196":"IP黑名单","CBC.7197":"IP限频","CBC.7198":"设备ID限频","CBC.7239":"黑邮箱情报","CBC.7250":"黑手机情报","CBC.7100":"重复绑定","CBC.7245":"会话已过期","CBC.7156":"账号名已被注册","CBC.7184":"邮箱已被注册","CBC.7185":"手机号已被注册","CBC.7209":"手机号注册数超限","CBC.7391":"账号名是华为云账号的系统账号保留字","CBC.7392":"华为云账号名只支持字母数据_-"},ev=UBA_CODE_INFO_MAP[error_code]||"创建并绑定失败_"+error_code;send2CloudBI(buildEventCategory(),"click","registerSubmitBtn",ev);collectBehavior(buildEventCategory(),"click","registerSubmitBtn",ev,"","","")}function onBeginBind(){send2CloudBI(buildEventCategory(),"click","beginBindAccount","")}function onBindSuccess(){send2CloudBI(buildEventCategory(),"click","bindAccount","success")}function onBindFailed(err){var error_code=err&&err.responseJSON&&err.responseJSON.error_code,leftTryNum=err&&err.responseJSON&&err.responseJSON.leftTryNum,UBA_CODE_INFO_MAP={"CBC.0151":"无权限","CBC.0100":"参数校验错误","CBC.7247":leftTryNum?"身份验证错误":"用户已锁定","CBC.7251":"用户已锁定","CBC.7100":"重复绑定","CBC.7252":"业务规则检查错误","CBC.7245":"会话已过期","CBC.7210":"手机号绑定多个账号","CBC.5401":"华为内部账号","CBC.7222":"账号已冻结","CBC.7224":"内部客户","CBC.7391":"账号名是华为云账号的系统账号保留字","CBC.7392":"华为云账号名只支持字母数据_-"},ev=UBA_CODE_INFO_MAP[error_code]||"绑定失败_"+error_code;send2CloudBI(buildEventCategory(),"click","bindAccount",ev)}function onLearnMoreBi(value){send2CloudBI(buildEventCategory(),"click","learnMore",value)}function sendTo360OCPC(){try{(function(w,n){w[n]="function"==typeof w[n]?w[n]:function(){(w[n].c=w[n].c||[]).push(arguments)};_qha("send",{"et":31,"order":[{"id":guidGenerator(),"orderType":"1"}]})})(window,"_qha")}catch(e){}}var getServiceParamValue=function(){var i,result=window.location.search;if(null==result||""==result)return"";i=result.indexOf("?service=");-1==i&&(i=result.indexOf("&service="));if(-1==i)return"";result=result.substring(i+9);i=result.indexOf("&");-1!=i&&(result=result.substring(0,i));0!=result.indexOf("https%3A%2F")&&0!=result.indexOf("http%3A%2F")||(result=decodeURIComponent(result));return result},initialCloudBI=function(domainId){var gaID,account;try{gaID="cn"===PAGE_SITE?"UA-55836286-1":"UA-55836286-39";account=domainId||"host";init("2","c9770c4dac06fe3b76ec9c7ad47273d0",gaID,{"UserAccount":account,"isdebug":"true","siteId":PAGE_SITE})}catch(e){}},initPMP=function(){$.getScript("https://res-static3.huaweicloud.com/content/dam/cloudbu-site/archive/commons/web_resoure/framework/portal/pmp/pmp.js",function(){try{PMP&&PMP.RavenInit("https://cc2708b925ed49eb9848d056dc9523d0@excpt.huaweicloud.com/22","",!0)}catch(e){}})},send2CloudBI=function(eventCategory,eventAction,eventLabel,eventValue,jsonParam){try{if(jsonParam){jsonParam.siteId=PAGE_SITE;onEvent(eventCategory,eventAction,eventLabel,eventValue,jsonParam)}else onEvent(eventCategory,eventAction,eventLabel,eventValue,{"siteId":PAGE_SITE})}catch(e){}},addPageView4CloudBI=function(pageName,customerId,uorExtParams){var jsonParam="";try{jsonParam={"D18":adhoc("getMatchedExpIds")[0],"D19":adhoc("getCurClientId")}}catch(e){}try{onPageView(pageName,jsonParam);collectPageView(customerId,uorExtParams)}catch(e){}};