feloader.add("@cloud/pep-activity-promotion01/pc/index",["@cloud/activity-api","@cloud/xtemplate-runtime","@cloud/activity-iframe","@cloud/activity-order","@cloud/lazyload"],(function(e,t,n){n.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/build/",n(n.s=13)}([function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){},function(e,t,n){},function(t,n){t.exports=e("@cloud/lazyload")},function(t,n){t.exports=e("@cloud/activity-order")},function(t,n){t.exports=e("@cloud/activity-iframe")},function(t,n){t.exports=e("@cloud/xtemplate-runtime")},function(e,t,n){"use strict";n.r(t);var o=function(e){var t,n,o=this,i=o.root,r=o.buffer,a=o.scope,c=(o.runtime,o.name,o.pos),l=a.data,s=a.affix,d=i.nativeCommands,u=i.utils,f=(u.callFn,u.callDataFn,u.callCommand,d.range,d.void,d.foreach,d.forin,d.each),p=(d.with,d.if);d.set,d.include,d.includeOnce,d.parse,d.extend,d.block,d.macro,d.debugger;function v(e,t,n){var o=e.data;e.affix;t.data+="\n    <p>",c.line=5;var i=o;return(t=t.writeEscaped(i)).data+="</p>\n",t}r.data+="\n",c.line=2,c.line=2;var m,h=(t=s.setOrderTip)!==e||(t=l.setOrderTip)!==e?null!=t?null!=(n=t.otherInfo)?n.length:n:t:a.resolveLooseUp(["setOrderTip","otherInfo","length"]);m=h>0,(r=p.call(o,a,{params:[m],fn:function(e,i,r){var a=e.data,l=e.affix;i.data+='\n<div class="pkg-order-tip-container">\n',c.line=4,c.line=4;var s=(t=l.setOrderTip)!==r||(t=a.setOrderTip)!==r?null!=t?n=t.otherInfo:t:e.resolveLooseUp(["setOrderTip","otherInfo"]);return(i=f.call(o,e,{params:[s],fn:v},i)).data+="\n</div>\n",i}},r)).data+='\n\n<div class="pkg-order-price-container">\n    ',c.line=11,c.line=11;var b=(t=s.currencySymbolVisible)!==e||(t=l.currencySymbolVisible)!==e?t:a.resolveLooseUp(["currencySymbolVisible"]);(r=p.call(o,a,{params:[b],fn:function(e,n,o){var i=e.data,r=e.affix;n.data+="\n    <em>",c.line=12;var a=(t=r.currencySymbol)!==o||(t=i.currencySymbol)!==o?t:e.resolveLooseUp(["currencySymbol"]);return(n=n.writeEscaped(a)).data+="</em>\n    ",n}},r)).data+='\n    <em class="pkg-order-integer">',c.line=14;var y=(t=s.integer)!==e||(t=l.integer)!==e?t:a.resolveLooseUp(["integer"]);(r=r.writeEscaped(y)).data+="</em>\n    ",c.line=15,c.line=15;var g=(t=s.isFree)!==e||(t=l.isFree)!==e?t:a.resolveLooseUp(["isFree"]);(r=p.call(o,a,{params:[!g],fn:function(e,n,o){var i=e.data,r=e.affix;n.data+='\n    <em class="pkg-order-decimal">',c.line=16;var a=(t=r.decimal)!==o||(t=i.decimal)!==o?t:e.resolveLooseUp(["decimal"]);return(n=n.writeEscaped(a)).data+="</em>\n    ",n}},r)).data+="\n    ",c.line=18,c.line=18;var k=(t=s.unit)!==e||(t=l.unit)!==e?t:a.resolveLooseUp(["unit"]);(r=p.call(o,a,{params:[k],fn:function(e,n,o){var i=e.data,r=e.affix;n.data+='\n    <em class="pkg-order-unit">',c.line=19;var a=(t=r.unit)!==o||(t=i.unit)!==o?t:e.resolveLooseUp(["unit"]);return(n=n.writeEscaped(a)).data+="</em>\n    ",n}},r)).data+="\n    ",c.line=21,c.line=21;var x=(t=s.isDiscount)!==e||(t=l.isDiscount)!==e?t:a.resolveLooseUp(["isDiscount"]);(r=p.call(o,a,{params:[x],fn:function(e,n,o){var i=e.data,r=e.affix;n.data+='\n    <em class="pkg-order-sale">',c.line=22;var a=(t=r.sale)!==o||(t=i.sale)!==o?t:e.resolveLooseUp(["sale"]);return(n=n.writeEscaped(a)).data+="</em>\n    ",n}},r)).data+='\n</div>\n<a class="pkg-order-btn ',c.line=25;var w=(t=s.btnClass)!==e||(t=l.btnClass)!==e?t:a.resolveLooseUp(["btnClass"]);(r=r.writeEscaped(w)).data+='"\npep-nocheck-matedata\nhref="',c.line=27;var C=(t=s.href)!==e||(t=l.href)!==e?t:a.resolveLooseUp(["href"]);(r=r.writeEscaped(C)).data+='"\neventLabel="',c.line=28;var O,$=(t=s.titlePc)!==e||(t=l.titlePc)!==e?t:a.resolveLooseUp(["titlePc"]),T=O=$+"_";T=O+((t=s.btnText)!==e||(t=l.btnText)!==e?t:a.resolveLooseUp(["btnText"])),(r=r.writeEscaped(T)).data+='"\ngetpkg="',c.line=29;var P,S=(t=s.discount)!==e||(t=l.discount)!==e?t:a.resolveLooseUp(["discount"]);P=!!S,(r=r.writeEscaped(P)).data+='"\n>',c.line=30;var _=(t=s.btnText)!==e||(t=l.btnText)!==e?t:a.resolveLooseUp(["btnText"]);return(r=r.writeEscaped(_)).data+="</a>",r};o.TPL_NAME="order.xtpl",t.default=o},function(t,n){t.exports=e("@cloud/activity-api")},function(e,t,n){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,r=o(n(1)),a=o(n(2)),c=o(n(3));!function(e){e["&lt;"]="<",e["&gt;"]=">",e["&amp;"]="&",e["&nbsp;"]=" ",e["&quot;"]='"',e["&copy;"]="©"}(i||(i={}));var l=/&\w+;|&#(\d+);/g,s=function(){function e(){(0,r.default)(this,e)}return(0,a.default)(e,null,[{key:"HTMLDecode",value:function(e){return"string"!=typeof e?e:e.replace(l,(function(e,t){var n=i[e];return void 0===n&&(n=isNaN(t)?e:String.fromCharCode(160===t?32:t)),n}))}},{key:"replaceParamVal",value:function(e,t,n){var o=new RegExp(t+"=([^&]*)");return e.replace(o,t+"="+n)}}]),e}();t.default=s,(0,c.default)(s,"getUrlParam",(function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=e.split("?"),i=o[o.length-1]?o[o.length-1].match(n):o[0].match(n);return null!==i?i[2].split("#")[0]:null}))},function(e,t,n){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(1)),r=o(n(2)),a=o(n(3));n(4),n(5),n(14),n(15);var c=o(n(6)),l=o(n(7)),s=n(8),d=o(n(9)),u=o(n(10)),f=o(n(11)),p=o(n(12));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var m,h={ruleTitle:{"zh-cn":"活动规则","en-us":"Terms & Conditions"},ok:{"zh-cn":"确认","en-us":"OK"}};!function(e){e.china="¥",e.hk="$"}(m||(m={}));var b={"zh-cn":{1:"原价 ",0:"省 "},"en-us":{1:"Original Price ",0:"Savings "}},y=function(){function e(t){(0,i.default)(this,e),(0,a.default)(this,"$el",void 0),(0,a.default)(this,"$tabContent",void 0),(0,a.default)(this,"lang",(document.querySelector("html").getAttribute("lang")||"zh-cn").toLowerCase()),(0,a.default)(this,"site",(document.querySelector("html").getAttribute("site")||"china").toLowerCase()),this.$el=$(t),this.$tabContent=this.$el.find(".activity-promotion01-tab-content-item"),c.default.getInstance(t),this.lazyload(t)}return(0,r.default)(e,[{key:"lazyload",value:function(e){var t=this;c.default.addListener(e,(function(){t.$el.attr("component-lazyload","true"),t.init(),t.bindEvents(),t.domainEvent(),t.setRule()}))}},{key:"init",value:function(){var e=this.$el.attr("section-theme"),t=this.$el.attr("section-bg-pc");["transpdark","transplight"].includes(e)&&t&&this.$el.css("background-image","url(".concat(t,")")),this.equalHeight(),this.createPromotion()}},{key:"createPromotion",value:function(){var e=this;this.$el.find(".activity-promotion01-tab-content-item.active").find(".activity-promotion01-tab-content-item-row").each((function(t,n){var o=0,i=0;$(n).find(".activity-promotion01-tab-content-item-card").each((function(t,n){var r,c,h,y,g,k=$(n);if(!k.attr("render")){var x=JSON.parse(k.find("textarea.activity-data").val().toString());if((null==x||null===(r=x.content)||void 0===r?void 0:r.setProgress)&&o++,(null==x||null===(c=x.content)||void 0===c?void 0:c.loadsource)&&i++,x.content.saleSwitch=null!=x&&null!==(h=x.content)&&void 0!==h&&h.saleSwitch?x.content.saleSwitch:0,["common","domain1","domain2","advantage1","image1"].includes(x.content.type)){var w,C,O;if(null===(w=x.menu)||void 0===w||!w.dataUrl)return;var T=Object.assign(x.content,x.menu,{formSet:(null===(C=x.menu)||void 0===C||null===(O=C.dynamicTable)||void 0===O?void 0:O.table)||[]});T.setOrderTip=T.setOrderTip||{},T.setOrderTip.showDiscount=T.showDiscount,T.setOrderTip.otherInfo=T.otherInfo,"domain1"===x.content.type&&(T.inputType="1-radio"),new l.default(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({targetContainer:k},T))}else{var P={titlePc:x.base.titlePc,currencySymbolVisible:!0,currencySymbol:m[e.site],isDiscount:Boolean(x.content.discount!==x.content.original),isFree:Boolean(0===x.content.discount&&x.content.freeText),sale:null,setOrderTip:{otherInfo:[]},href:x.content.href,btnText:x.content.btnText,unit:x.content.unit};P.sale="".concat(x.content.saleSwitch?x.content.original.toFixed(2):(x.content.original-x.content.discount).toFixed(2)),P.sale="".concat(b[e.lang][x.content.saleSwitch]).concat(m[e.site]+P.sale),P.setOrderTip.otherInfo=x.content.otherInfo;var S=x.content.discount.toFixed(2).split(".");P.integer=S[0],P.decimal=".".concat(S[1])||!1,P.isFree&&(P.integer=x.content.freeText,P.currencySymbolVisible=!1),k.find(".pkg-order-container").html(new d.default(u.default).render(P))}k.attr("render","true");var _=new s.OrderCheck(k,x.content.type,null==x||null===(y=x.menu)||void 0===y?void 0:y.defaultEvent);null!==(g=x.content.type)&&void 0!==g&&g.match("domain")&&k.on("click keydown",".domain-check .u-icon-search,input",(function(e){if(!("click"===e.type&&"INPUT"===e.target.nodeName||e.keyCode&&13!==e.keyCode)){var t=_.getDomain(),n=t.domainPrefix+t.domainSuffix;if(!t.domainPrefix)return k.find(".activity-promotion-domain-check-container").addClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_noInput")),void k.find(".pkg-order-btn").attr("domainCheck","false");f.default.domainCheck(n).then((function(e){var t=e.data;if(t.availability){k.find(".activity-promotion-domain-check-container").removeClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_".concat(t.availability))),k.find(".pkg-order-btn").attr("domainCheck","true");var o=k.find(".pkg-order-btn").attr("href");o=o.match("domainName=")?p.default.replaceParamVal(o,"domainName",n):o.replace("promotionId","domainName=".concat(n,"&promotionId")),k.find(".pkg-order-btn").attr("href",o)}else k.find(".activity-promotion-domain-check-container").addClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_".concat(t.availability))),k.find(".pkg-order-btn").attr("domainCheck","false")})).catch((function(e){k.find(".activity-promotion-domain-check-container").addClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_false")),k.find(".pkg-order-btn").attr("domainCheck","false")}))}}))}})),o&&$(n).find(".activity-promotion01-tab-content-item-card").addClass("has-progress"),i&&$(n).find(".activity-promotion01-tab-content-item-card").addClass("has-loadsource")}))}},{key:"bindEvents",value:function(){var e=this;this.$el.find(".activity-promotion01-tab-title-item").on("click",(function(t){var n=$(t.target).closest(".activity-promotion01-tab-title-item"),o=n.index();n.addClass("active").siblings().removeClass("active"),e.$tabContent.eq(o).addClass("active").siblings().removeClass("active"),e.equalHeight(),e.createPromotion()})),this.$el.find(".activity-promotion01-tab-content-item-card").on("mouseover",(function(e){$(e.target).closest(".activity-promotion01-tab-content-item-card").addClass("active").siblings().removeClass("active")})),this.$el.on("click",".show-more-btn",(function(t){var n=$(t.target).closest(".activity-promotion01-tab-content-item"),o=$(window).scrollTop();n.toggleClass("show-all"),$(window).scrollTop(o),e.equalHeight()}))}},{key:"domainEvent",value:function(){this.$el.on("change keydown focus",'[name="domainCheck"]',(function(e){var t=$(e.target).closest(".activity-promotion-card");t.find(".activity-promotion-domain-check-container").removeClass("error").find(".domain-check-response").text(""),t.find(".pkg-order-btn").removeAttr("domainCheck")})),this.$el.delegate('[bi_parent_name="域名"] input',"click",(function(e){var t=$(e.target).closest(".activity-promotion-card"),n=$(e.target).val();t.find(".pkg-order-btn").attr("id").match(n)||(t.find(".activity-promotion-domain-check-container").removeClass("error").find(".domain-check-response").text(""),t.find(".pkg-order-btn").removeAttr("domainCheck"))}))}},{key:"setRule",value:function(){var e=this,t=$.fn.porModal.Constructor,n=(this.$el.find(".activity-rule").next().val()||"").toString();this.$el.find(".activity-rule").on("click",(function(o){n=n.match("&lt;br&gt;")?n.replace(/<\/?p>/gi,""):n,n=p.default.HTMLDecode(n);var i='<ul class="activity-rule-dialog-container">\n                '.concat(n.replace(/<p>/gi,"<li>").replace(/<\/p>/gi,"</li>"),"\n            </ul>");t.show({title:h.ruleTitle[e.lang],text:i,size:"large",buttons:[{style:t.buttonStyle.primary,text:h.ok[e.lang]}]})}))}},{key:"equalHeight",value:function(){this.$el.find(".activity-promotion01-tab-content-item.active").find(".activity-promotion01-tab-content-item-row").each((function(e,t){if(!$(t).is(":hidden")&&!$(t).attr("equal-height")){var n=0;$(t).find(".activity-promotion01-tab-content-item-card-subtitle").each((function(e,t){$(t).outerHeight()>n&&(n=$(t).outerHeight())})).promise().then((function(e){$(e).height(n)})),$(t).attr("equal-height","true")}}))}}],[{key:"moduleName",value:function(){return"pep-activity-promotion01"}}]),e}();t.default=y},function(e,t,n){},function(e,t,n){}])}));