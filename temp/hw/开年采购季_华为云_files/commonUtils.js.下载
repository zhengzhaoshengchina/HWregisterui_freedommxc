function isBpInvitedRegister($scope,cookieOp,iamUtils,iamHttpService,i18n){var cooperateSourceID,isBpInvite,service,bpName,inviteCode,bindType,hw_abi,abiJson;$scope.bp={"bpName":"","bindType":"","salesID":"","referUrl":"","campaignID":"","showName":"","chkChange":function(){"function"==typeof onAgreeBindBpClick&&onAgreeBindBpClick($scope.bp.isBindBp)},"isBindBp":!1,"isForceBindBp":!1,"isShowBindTip":!1,"isShowBpNotice":!1,"bindBpTip":"","bpUserNoticeZh":"https://support.huaweicloud.com/bp_usernotice/index.html","bpUserNoticeEn":"https://support.huaweicloud.com/en-us/bp_usernotice/index.html","bpUserNoticeZhHK":"https://support-intl.huaweicloud.com/zh-cn/bp_usernotice/index.html","bpUserNoticeEnHK":"https://support-intl.huaweicloud.com/bp_usernotice/index.html","openLinkBpUserNotice":function(){var url=$scope.bp.bpUserNoticeEn;"zh-cn"===window.language&&(url=$scope.bp.bpUserNoticeZh);window.open(url)},"openLinkBpUserNoticeHK":function(){var url=$scope.bp.bpUserNoticeEnHK;"zh-cn"===window.language&&(url=$scope.bp.bpUserNoticeZhHK);window.open(url)}};$scope.redirectUrl=iamUtils.getUrlParams().service;void 0===$scope.redirectUrl&&($scope.redirectUrl=HOME_PAGE_URL);cooperateSourceID="";isBpInvite=!!iamUtils.getUrlParams().bpInvite;service=iamUtils.getUrlParams().service;if(isBpInvite){bpName=iamUtils.getUrlParams().bpName;inviteCode=iamUtils.getUrlParams().inviteCode;bindType=iamUtils.getUrlParams().bindType;cooperateSourceID=iamUtils.getUrlParams().campaignID;$scope.bindBpUrl=iamUtils.getUrlParams().service;void 0===$scope.bindBpUrl&&($scope.isMobileWeb?"en-us"===window.language?$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?locale=en-us&hws_route_url=mobile/registSuccess":$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?hws_route_url=mobile/registSuccess":"en-us"===window.language?$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?locale=en-us&hws_route_url=registSuccess":$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?hws_route_url=registSuccess");inviteCode&&(-1!==$scope.bindBpUrl.indexOf("?")?$scope.bindBpUrl+="&inviteCode="+inviteCode:$scope.bindBpUrl+="?inviteCode="+inviteCode);bpName&&(-1!==$scope.bindBpUrl.indexOf("?")?$scope.bindBpUrl+="&bpName="+bpName:$scope.bindBpUrl+="?bpName="+bpName);bindType&&(-1!==$scope.bindBpUrl.indexOf("?")?$scope.bindBpUrl+="&bindType="+bindType:$scope.bindBpUrl+="?bindType="+bindType);cooperateSourceID&&(-1!==$scope.bindBpUrl.indexOf("?")?$scope.bindBpUrl+="&cooperateSourceID="+cooperateSourceID:$scope.bindBpUrl+="?cooperateSourceID="+cooperateSourceID);$scope.bp.isBindBp=!0;return!0}hw_abi=cookieOp.getCookie("hw_abi");if(hw_abi){abiJson=JSON.parse(hw_abi);if(abiJson){$scope.bp.bpName=abiJson.n;$scope.bp.bindType=abiJson.t;if(!$scope.bp.bpName||!$scope.bp.bindType)return!1;$scope.bp.referUrl=abiJson.url;$scope.bp.salesID=abiJson.sid;$scope.bp.campaignID=abiJson.campaignID;$scope.bp.isShowBindTip=!0;$scope.bp.isBindBp=!0;$scope.bp.isShowBpNotice=2===$scope.bp.bindType||3===$scope.bp.bindType;cooperateSourceID="";$scope.bp.bpName&&$scope.bp.campaignID&&(cooperateSourceID="&cooperateSourceID="+$scope.bp.campaignID);getBpShowName($scope,iamHttpService);$scope.bp.bindBpTip=iamUtils.i18nFormat(i18n("bindBpTip"),$scope.bp.showName);$scope.isMobileWeb?"en-us"===window.language?$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?locale=en-us&hws_route_url=mobile/registSuccess&bpName="+$scope.bp.bpName+"&bindType="+$scope.bp.bindType+cooperateSourceID:$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?hws_route_url=mobile/registSuccess&bpName="+$scope.bp.bpName+"&bindType="+$scope.bp.bindType+cooperateSourceID:"en-us"===window.language?$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?locale=en-us&hws_route_url=registSuccess&bpName="+$scope.bp.bpName+"&bindType="+$scope.bp.bindType+cooperateSourceID:$scope.bindBpUrl="https://"+USERCENTER_DOMAIN+"/usercenter/?hws_route_url=registSuccess&bpName="+$scope.bp.bpName+"&bindType="+$scope.bp.bindType+cooperateSourceID;$scope.bp.salesID&&($scope.bindBpUrl=$scope.bindBpUrl+"&inviteCode="+$scope.bp.salesID);service&&($scope.bindBpUrl=$scope.bindBpUrl+"&url="+encodeURIComponent(service));$scope.bp.referUrl&&document.referrer&&0==document.referrer.indexOf($scope.bp.referUrl)&&($scope.bp.isForceBindBp=!0);return!0}}return!1}function getBpShowName($scope,iamHttpService){iamHttpService.get({"url":"/registerui/rest/cbc/cbccustmgrservice/v1/customer/customer-basic-info/"+$scope.bp.bpName,"async":!1}).then(function(data){$scope.bp.showName=data.name||""})}function isNewRegisterUrl(){var isNew=!1;-1===window.location.href.indexOf("registerui/public/custom")&&(isNew=!0);return isNew}function msgCodeBtnStatusHandler($scope,iamUtils,i18n){function timer(){if($scope.model.needTimer&&counter<timeInterval){$scope.model.msgBtnTxt=iamUtils.i18nFormat(i18n("msgCodeTxtWait"),timeInterval-counter);0!=counter&&$scope.$apply();counter++;setTimeout(timer,1e3)}else{$("#msgBtn").removeClass("msgBtnDisabled");$scope.model.msgBtnTxt=$scope.model.msgBtnOriTxt;$scope.$apply()}}var timeInterval=60,counter=0;$("#msgBtn").addClass("msgBtnDisabled");setTimeout(timer,0)}function validateAccount($scope,value,utils,i18n,minlen,maxlen){var exUser,pattern,minLength,maxLength;if(void 0===value||-1!==value.indexOf(" ")||0===value.length)return{"result":!1,"errorInfo":i18n("emptyTxt")};if(!/^[a-zA-Z]$/.test(value.substring(0,1)))return{"result":!1,"errorInfo":i18n("nameBegin")};if(0===value.toLowerCase().indexOf("op_")||0===value.toLowerCase().indexOf("shadow_")||0===value.toLowerCase().indexOf("cbc_s_"))return{"result":!1,"errorInfo":i18n("innerKeyWord")};if($scope&&$scope.isUniRegister){if(0===value.toLowerCase().indexOf("pub_")||0===value.toLowerCase().indexOf("eta_")||0===value.toLowerCase().indexOf("igl_"))return{"result":!1,"errorInfo":i18n("innerKeyWord")};exUser=/^[a-zA-Z]{1,3}[0-9]{1,}$/;if(exUser.test(value))return{"result":!1,"errorInfo":i18n("nameBeginCharWithNum")}}pattern=new RegExp("^[a-zA-Z][0-9a-zA-Z\\_\\- ]*$");if(!pattern.test(value))return{"result":!1,"errorInfo":i18n("nameContainsChar")};minLength=minlen||(username_minlen<1?1:username_minlen);maxLength=maxlen||(username_maxlen>64?64:username_maxlen);if(value.length<minLength)return{"result":!1,"errorInfo":utils.i18nFormat(i18n("minLenTxt"),minLength)};if(value.length>maxLength)return{"result":!1,"errorInfo":utils.i18nFormat(i18n("maxLenTxt"),maxLength)};return{"result":!0,"errorInfo":""}}function buildNameTip(i18n,utils,securityPolicy,$scope,minlen,maxlen){var name_minlen=minlen||securityPolicy.accountpolicy.username_minlen,name_maxlen=maxlen||securityPolicy.accountpolicy.username_maxlen,tipStr="<div id='accountTip' style='font-size:12px;font-family:Arial;color:#050505;margin: 5px 0 5px 10px;'>";"zh-cn"===window.language&&(tipStr+="<img id='nameCnId' class='tootip-img' src='//res.hc-cdn.com/register/6.2.209/registerui/theme/image/default.png' />&nbsp;&nbsp;<div class='tootip-div'>"+i18n("nameContainsChinese")+"</div>");$scope&&$scope.isUniRegister&&(tipStr+="<img id='nameBeginCharWithNumId' class='tootip-img' src='//res.hc-cdn.com/register/6.2.209/registerui/theme/image/default.png' />&nbsp;&nbsp;<div class='tootip-div'>"+i18n("nameBeginCharWithNum")+"</div>");tipStr+="<img id='nameBeginId' class='tootip-img' src='//res.hc-cdn.com/register/6.2.209/registerui/theme/image/default.png' />&nbsp;&nbsp;<div class='tootip-div'>"+i18n("nameBegin")+"</div><img id='nameLenId' class='tootip-img' src='//res.hc-cdn.com/register/6.2.209/registerui/theme/image/default.png' />&nbsp;&nbsp;<div class='tootip-div'>"+utils.i18nFormat(i18n("minMaxLenTxt"),name_minlen,name_maxlen)+"</div><img id='nameContainsCharsId' class='tootip-img' src='//res.hc-cdn.com/register/6.2.209/registerui/theme/image/default.png' />&nbsp;&nbsp;<div class='tootip-div'>"+i18n("nameContainsChar")+"</div></div>";return tipStr}function checkAccountName(accountName,$scope,minlen,maxlen){var nameLenResult,containsChar,beginsWith,containsChinese,beginsWithCharAndNum,name_minlen=minlen||username_minlen,name_maxlen=maxlen||username_maxlen;if(void 0==accountName.length||0===accountName.length){setTipStateDefault($scope,"nameLenId");setTipStateDefault($scope,"nameContainsCharsId");setTipStateDefault($scope,"nameBeginCharWithNumId");setTipStateDefault($scope,"nameBeginId");setTipStateDefault($scope,"nameCnId");return}nameLenResult=accountName.length>=name_minlen&&accountName.length<=name_maxlen;containsChar=/^[a-zA-Z0-9\_\-]+$/.test(accountName);beginsWith=/^[a-zA-Z]$/.test(accountName.substring(0,1));containsChinese=/^[^\u4e00-\u9fa5]*$/.test(accountName);beginsWithCharAndNum=!/^[a-zA-Z]{1,3}[0-9]{1,}$/.test(accountName);setTipStateByCheckResult($scope,"nameLenId",nameLenResult);setTipStateByCheckResult($scope,"nameContainsCharsId",containsChar);setTipStateByCheckResult($scope,"nameBeginId",beginsWith);setTipStateByCheckResult($scope,"nameCnId",containsChinese);setTipStateByCheckResult($scope,"nameBeginCharWithNumId",beginsWithCharAndNum)}function setTipStateDefault($scope,id){if(void 0==$("#"+id))return;$("#"+id).attr("src",$scope.model.validTip)}function setTipStateByCheckResult($scope,id,result){if(void 0==$("#"+id))return;result?$("#"+id).attr("src",$scope.model.validSuc):$("#"+id).attr("src",$scope.model.validFail)}function getCurrentRegion($scope){$.ajax({"type":"GET","url":"https://portal-intl.huaweicloud.com/portaluserqueryservice/ipsearch","async":!1,"success":function(data){$scope.model.currentRegion=data&&data.data&&data.data[0]&&data.data[0].location&&data.data[0].location.countrycode;currentRegion=$scope.model.currentRegion},"error":function(err){}});return $scope.model.currentRegion}function getRegionList($scope,iamHttpService){getCurrentRegion($scope);$scope.model.regionValues=[];iamHttpService.get({"url":"/registerui/getCountryList","data":{"locale":window.language},"async":!1}).then(function(regions){var temp,i;$scope.model.regionJson={};regions=removeProperty(regions);for(i in regions){if(!regions[i]||!regions[i].countryAbbreviation)continue;$scope.model.regionJson[regions[i].countryAbbreviation]=regions[i].countryName;temp={"id":regions[i].countryAbbreviation,"label":regions[i].countryName};$scope.model.regionValues.push(temp)}if($scope.model.regionValues)if($scope.model.regionJson[currentRegion]){$scope.model.regionId=currentRegion;$scope.model.regionName=$scope.model.regionJson[currentRegion]}else if(defaultRegion&&$scope.model.regionJson[defaultRegion]){$scope.model.regionId=defaultRegion;$scope.model.regionName=$scope.model.regionJson[defaultRegion]}else{$scope.model.regionId=$scope.model.regionValues[0].id;$scope.model.regionName=$scope.model.regionValues[0].label}})}function removeProperty(regions){var nsKey,i;if(null===regions||""===regions||void 0===regions)return regions;for(nsKey in notShowCountryList){if(!notShowCountryList[nsKey])continue;for(i in regions)notShowCountryList[nsKey]===regions[i].countryAbbreviation&&regions.splice(i,1)}return regions}function saveCurrRegion(data){currentRegion=data&&data.data&&data.data.iso_code}function delZeroWidthChar(str){/^.*[\u200b\u200c\u200d\ufeff\u202b\u202c].*$/.test(str)&&onContainZeroWidthChar&&onContainZeroWidthChar(str);return str.replace(/[\u200b\u200c\u200d\ufeff\u202b\u202c]/g,"")}function trimInput(str){return str&&delZeroWidthChar(str.trim())}function getChannelFromVal(cookieOp,iamUtils){var hw_abi,hw_abi_obj,channelFrom=getUrlParams().channelFrom;if(null==channelFrom||""==channelFrom){hw_abi=cookieOp.getCookie("hw_abi");if(hw_abi){hw_abi_obj=JSON.parse(hw_abi);hw_abi_obj&&null!=hw_abi_obj.cf&&""!=hw_abi_obj.cf&&(channelFrom=decodeURIComponent(hw_abi_obj.cf))}}if(channelFrom&&channelFrom.length>20){collectBehavior(buildEventCategory(),"click","channelFrom",channelFrom);channelFrom=channelFrom.substring(0,20)}return channelFrom}function getConfigItem(param,iamHttpService){return window.regSysConfig&&window.regSysConfig[param.attributeId]||param.defValue}function parsePhoneNumber(areaCode,phoneNumber){var countriesStartWith8,countriesStartWith044,countriesStartWith0;if(!areaCode||!phoneNumber||"CN"===areaCode)return phoneNumber;countriesStartWith8=["BY","KZ","LT","RU","TJ","TM","UZ"];countriesStartWith044=["MX"];countriesStartWith0=["AE","AF","AL","AM","AR","AT","AU","AZ","BA","BD","BE","BG","BO","BR","CC","CD","CH","CN","CO","CX","DE","DZ","EC","EG","ER","ET","FI","FR","GB","GE","GF","GH","GP","HR","ID","IE","IL","IN","IQ","JO","JP","KE","KG","KH","KI","KR","LA","LB","LI","LK","LR","LY","MA","MC","MD","ME","MG","MK","MM","MN","MQ","MW","MY","NA","NG","NL","NP","NZ","PE","PH","PK","PM","PS","PY","RE","RO","RS","RW","SA","SE","SI","SK","SL","SO","TH","TR","TW","TZ","UA","UG","UY","VE","VN","YE","YT","ZA","ZM","ZW"];if(-1!==countriesStartWith8.indexOf(areaCode)){if("8"===phoneNumber.substr(0,1))return phoneNumber.substring(1)}else if(-1!==countriesStartWith044.indexOf(areaCode)){if("0"===phoneNumber.substr(0,1))return phoneNumber.substring(1)}else if(-1!==countriesStartWith0.indexOf(areaCode)&&"0"===phoneNumber.substr(0,1))return phoneNumber.substring(1);return phoneNumber}function getPwdStrengthLevel(pwd){function charMode(iN){if(iN>=48&&iN<=57)return 1;if(iN>=65&&iN<=90)return 2;return iN>=97&&iN<=122?4:8}function bitTotal(num){var k,modes1=0;for(k=0;k<4;k++){1&num&&modes1++;num>>>=1}return modes1}function getLevel(allBits){switch(allBits){case 4:case 3:return"high";case 2:return"mid";case 1:default:return"low"}}var i,modes=0;for(i=0;i<pwd.length;i++)modes|=charMode(pwd.charCodeAt(i));return getLevel(bitTotal(modes))}function getUrlParams(){var index,key,value,urlParams={},searchStr=window.location.search.substring(1),params=searchStr.split("&");for(index=0;index<params.length;index++){key=params[index].substring(0,params[index].indexOf("="));value=params[index].substring(params[index].indexOf("=")+1);urlParams[key]=decodeURIComponent(value)}return urlParams}function maskMobile(mobile){-1!==mobile.indexOf("-")&&(mobile=mobile.substring(mobile.indexOf("-")+1));if(""===mobile||void 0===mobile)return"";if(mobile.length>7)return mobile.substr(0,3)+"****"+mobile.substr(7,mobile.length);if(mobile.length>3)return mobile.substr(0,3)+"****";return mobile+"****"}function maskEmail(email){var pair,pref,len,beginString,endString,maskEmailval;if(!email)return"******";if(-1===email.indexOf("@"))return"******";pair=email.split("@");if(2!==pair.length)return"******";pref=pair[0];len=pref.length;beginString=len<2?pref:pref.substring(0,1);endString=len>2?pref.substring(len-1,len):"";maskEmailval="";2===len||3===len?maskEmailval="*":4===len?maskEmailval="**":len>4&&(maskEmailval="***");return beginString+maskEmailval+endString+"@"+pair[1]}function getFromacct(cookieOp){var fromacct=getUrlParams().fromacct;void 0!=fromacct&&""!=fromacct||(fromacct=cookieOp.getCookie("h_fromacct"));return fromacct}var notShowCountryList=["RU"];