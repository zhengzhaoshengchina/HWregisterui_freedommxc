define("base/utils/iamHttpService",[],function(){"use strict";function getAjaxConf(){var site="CN";"undefined"!=typeof SITE_CONFIG&&"HWC_HK"===SITE_CONFIG&&(site="INTL");(window.location.href.indexOf("registerui/cn")>-1||window.location.href.indexOf("registerui/hcso")>-1||window.location.href.indexOf("registerui/uni/cn")>-1)&&(site="CN");window.location.href.indexOf("registerui/intl")>-1&&(site="INTL");return{"timeout":12e4,"headers":{"Pragma":"no-store","Cache-control":"no-store","X-REG-SITE-TYPE":site,"X-Language":window.language},"contentType":"application/x-www-form-urlencoded; charset=UTF-8","data":{}}}function buildChineseMonitor(data,url,langJson){var chinese,alarmData;if(-1===document.domain.indexOf("reg.huaweicloud.com")||-1===document.domain.indexOf("console-intl.huaweicloud.com"))return;if("en-us"===langJson&&/[\u4e00-\u9fa5]+/.test(JSON.stringify(data))){chinese=JSON.stringify(data).match(/[\u4e00-\u9fa5]+/g);alarmData={"type":4,"page":window.location.hash,"requestURL":url,"data":chinese};PMP.RavenSendException("[Chinese in English]",alarmData)}}function buildSpaceMonitor(data,url){var escape,alarmData;if(-1===document.domain.indexOf("reg.huaweicloud.com")||-1===document.domain.indexOf("console-intl.huaweicloud.com"))return;if(/(&nbsp)|(&nbsp;)|(&quot|&quot;)|(&amp|&amp;)|(&lt|&lt;)|(&gt|&gt;)/.test(JSON.stringify(data))){data=JSON.stringify(data);escape=JSON.stringify(data).match(/(&nbsp)|(&nbsp;)|(&quot|&quot;)|(&amp|&amp;)|(&lt|&lt;)|(&gt|&gt;)/g);alarmData={"type":4,"page":window.location.hash,"requestURL":url,"data":data,"dataEscape":escape};PMP.RavenSendException("[Interface contains escape characters]",alarmData)}}function buildMixedCnEnMonitor(data,url){var chinese,english,alarmData;if(-1===document.domain.indexOf("reg.huaweicloud.com")||-1===document.domain.indexOf("console-intl.huaweicloud.com"))return;if(/[\u4e00-\u9fa5]+/.test(JSON.stringify(data))&&/[a-zA-Z]+/.test(JSON.stringify(data))){chinese=JSON.stringify(data).match(/[\u4e00-\u9fa5]+/g);english=JSON.stringify(data).match(/[a-zA-Z]+/g);data=JSON.stringify(data);alarmData={"type":4,"page":window.location.hash,"requestURL":url,"dataChinese":chinese,"dataEnglish":english,"data":data};PMP.RavenSendException("[Mixed Chinese and English]",alarmData)}}function buildSpecialSymbolMonitor(data,url){var regEn,regCn,alarmData;if(-1===document.domain.indexOf("reg.huaweicloud.com")||-1===document.domain.indexOf("console-intl.huaweicloud.com"))return;if(/[`~!@#$%^&*()+<>?\\/]+/.test(JSON.stringify(data))||/[·！#￥（——）：；“”‘、，|《。》？、【】[\]]+/.test(JSON.stringify(data))){regEn=JSON.stringify(data).match(/[`~!@#$%^&*()+<>?\\/]+/g);regCn=JSON.stringify(data).match(/[·！#￥（——）：；“”‘、，|《。》？、【】[\]]+/g);data=JSON.stringify(data);alarmData={"type":4,"page":window.location.hash,"requestURL":url,"dataRegEn":regEn,"dataRegCn":regCn,"data":data};PMP.RavenSendException("[Interface contains special symbols]",alarmData)}}function iamAjax(reqType){return function(config){var ajaxConf,ajax,deferred=$.Deferred();adaptConfig(config);ajaxConf=getAjaxConf();$.extend(!0,ajaxConf,config);ajaxConf.type=reqType;ajax=$.ajax(ajaxConf);ajax.success?ajax.success(function(){var dataJson,urlJson,langJson;try{dataJson=arguments[0]?arguments[0].responseJSON?arguments[0].responseJSON:arguments[0]:"";urlJson=ajaxConf&&ajaxConf.url?ajaxConf.url:"";langJson=window.language;buildChineseMonitor(dataJson,urlJson,langJson);buildSpaceMonitor(dataJson,urlJson);buildMixedCnEnMonitor(dataJson,urlJson);buildSpecialSymbolMonitor(dataJson,urlJson)}catch(e){}deferred.resolve(arguments[0])}).error(function(){var dataJson,urlJson,langJson;try{dataJson=arguments[0]?arguments[0].responseJSON?arguments[0].responseJSON:arguments[0]:"";urlJson=ajaxConf&&ajaxConf.url?ajaxConf.url:"";langJson=window.language;buildChineseMonitor(dataJson,urlJson,langJson);buildSpaceMonitor(dataJson,urlJson);buildMixedCnEnMonitor(dataJson,urlJson);buildSpecialSymbolMonitor(dataJson,urlJson)}catch(e){}deferred.reject(arguments[0])}):ajax.then(function(){var dataJson,urlJson,langJson;try{dataJson=arguments[0]?arguments[0].responseJSON?arguments[0].responseJSON:arguments[0]:"";urlJson=ajaxConf&&ajaxConf.url?ajaxConf.url:"";langJson=window.language;buildChineseMonitor(dataJson,urlJson,langJson);buildSpaceMonitor(dataJson,urlJson);buildMixedCnEnMonitor(dataJson,urlJson);buildSpecialSymbolMonitor(dataJson,urlJson)}catch(e){}deferred.resolve(arguments[0])}).catch(function(){var dataJson,urlJson,langJson;try{dataJson=arguments[0]?arguments[0].responseJSON?arguments[0].responseJSON:arguments[0]:"";urlJson=ajaxConf&&ajaxConf.url?ajaxConf.url:"";langJson=window.language;buildChineseMonitor(dataJson,urlJson,langJson);buildSpaceMonitor(dataJson,urlJson);buildMixedCnEnMonitor(dataJson,urlJson);buildSpecialSymbolMonitor(dataJson,urlJson)}catch(e){}deferred.reject(arguments[0])});return deferred.promise()}}function adaptConfig(config){if(config.params){config.data=config.params;delete config.params}if(config.header){config.headers=config.header;delete config.header}}var i,supportType=["GET","POST","PUT","DELETE","PATCH"],iamHttpService={};for(i=0;i<supportType.length;i++)iamHttpService[supportType[i].toLowerCase()]=iamAjax(supportType[i]);return iamHttpService});