feloader.add("@cloud/pep-activity-promotion02/pc/index",["@cloud/activity-api","@cloud/xtemplate-runtime","@cloud/activity-iframe","@cloud/activity-order","@cloud/lazyload"],(function(e,t,n){n.exports=function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/build/",n(n.s=14)}([function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(t,n){t.exports=e("@cloud/lazyload")},function(t,n){t.exports=e("@cloud/activity-order")},function(t,n){t.exports=e("@cloud/activity-iframe")},function(t,n){t.exports=e("@cloud/xtemplate-runtime")},function(e,t,n){"use strict";n.r(t);var o=function(e){var t,n,o=this,i=o.root,a=o.buffer,r=o.scope,c=(o.runtime,o.name,o.pos),l=r.data,d=r.affix,s=i.nativeCommands,u=i.utils,f=(u.callFn,u.callDataFn,u.callCommand,s.range,s.void,s.foreach,s.forin,s.each),p=(s.with,s.if);s.set,s.include,s.includeOnce,s.parse,s.extend,s.block,s.macro,s.debugger;function v(e,t,n){var o=e.data;e.affix;t.data+="\n    <p>",c.line=5;var i=o;return(t=t.writeEscaped(i)).data+="</p>\n",t}a.data+="\n",c.line=2,c.line=2;var m,h=(t=d.setOrderTip)!==e||(t=l.setOrderTip)!==e?null!=t?null!=(n=t.otherInfo)?n.length:n:t:r.resolveLooseUp(["setOrderTip","otherInfo","length"]);m=h>0,(a=p.call(o,r,{params:[m],fn:function(e,i,a){var r=e.data,l=e.affix;i.data+='\n<div class="pkg-order-tip-container">\n',c.line=4,c.line=4;var d=(t=l.setOrderTip)!==a||(t=r.setOrderTip)!==a?null!=t?n=t.otherInfo:t:e.resolveLooseUp(["setOrderTip","otherInfo"]);return(i=f.call(o,e,{params:[d],fn:v},i)).data+="\n</div>\n",i}},a)).data+='\n\n<div class="pkg-order-price-container">\n    ',c.line=11,c.line=11;var y=(t=d.currencySymbolVisible)!==e||(t=l.currencySymbolVisible)!==e?t:r.resolveLooseUp(["currencySymbolVisible"]);(a=p.call(o,r,{params:[y],fn:function(e,n,o){var i=e.data,a=e.affix;n.data+="\n    <em>",c.line=12;var r=(t=a.currencySymbol)!==o||(t=i.currencySymbol)!==o?t:e.resolveLooseUp(["currencySymbol"]);return(n=n.writeEscaped(r)).data+="</em>\n    ",n}},a)).data+='\n    <em class="pkg-order-integer">',c.line=14;var b=(t=d.integer)!==e||(t=l.integer)!==e?t:r.resolveLooseUp(["integer"]);(a=a.writeEscaped(b)).data+="</em>\n    ",c.line=15,c.line=15;var g=(t=d.isFree)!==e||(t=l.isFree)!==e?t:r.resolveLooseUp(["isFree"]);(a=p.call(o,r,{params:[!g],fn:function(e,n,o){var i=e.data,a=e.affix;n.data+='\n    <em class="pkg-order-decimal">',c.line=16;var r=(t=a.decimal)!==o||(t=i.decimal)!==o?t:e.resolveLooseUp(["decimal"]);return(n=n.writeEscaped(r)).data+="</em>\n    ",n}},a)).data+="\n    ",c.line=18,c.line=18;var k=(t=d.unit)!==e||(t=l.unit)!==e?t:r.resolveLooseUp(["unit"]);(a=p.call(o,r,{params:[k],fn:function(e,n,o){var i=e.data,a=e.affix;n.data+='\n    <em class="pkg-order-unit">',c.line=19;var r=(t=a.unit)!==o||(t=i.unit)!==o?t:e.resolveLooseUp(["unit"]);return(n=n.writeEscaped(r)).data+="</em>\n    ",n}},a)).data+="\n    ",c.line=21,c.line=21;var x=(t=d.isDiscount)!==e||(t=l.isDiscount)!==e?t:r.resolveLooseUp(["isDiscount"]);(a=p.call(o,r,{params:[x],fn:function(e,n,o){var i=e.data,a=e.affix;n.data+='\n    <em class="pkg-order-sale">',c.line=22;var r=(t=a.sale)!==o||(t=i.sale)!==o?t:e.resolveLooseUp(["sale"]);return(n=n.writeEscaped(r)).data+="</em>\n    ",n}},a)).data+='\n</div>\n<a class="pkg-order-btn ',c.line=25;var w=(t=d.btnClass)!==e||(t=l.btnClass)!==e?t:r.resolveLooseUp(["btnClass"]);(a=a.writeEscaped(w)).data+='"\npep-nocheck-matedata\nhref="',c.line=27;var C=(t=d.href)!==e||(t=l.href)!==e?t:r.resolveLooseUp(["href"]);(a=a.writeEscaped(C)).data+='"\neventLabel="',c.line=28;var O,$=(t=d.titlePc)!==e||(t=l.titlePc)!==e?t:r.resolveLooseUp(["titlePc"]),T=O=$+"_";T=O+((t=d.btnText)!==e||(t=l.btnText)!==e?t:r.resolveLooseUp(["btnText"])),(a=a.writeEscaped(T)).data+='"\ngetpkg="',c.line=29;var P,S=(t=d.discount)!==e||(t=l.discount)!==e?t:r.resolveLooseUp(["discount"]);P=!!S,(a=a.writeEscaped(P)).data+='"\n>',c.line=30;var _=(t=d.btnText)!==e||(t=l.btnText)!==e?t:r.resolveLooseUp(["btnText"]);return(a=a.writeEscaped(_)).data+="</a>",a};o.TPL_NAME="order.xtpl",t.default=o},function(t,n){t.exports=e("@cloud/activity-api")},function(e,t,n){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=o(n(1)),r=o(n(2)),c=o(n(3));!function(e){e["&lt;"]="<",e["&gt;"]=">",e["&amp;"]="&",e["&nbsp;"]=" ",e["&quot;"]='"',e["&copy;"]="©"}(i||(i={}));var l=/&\w+;|&#(\d+);/g,d=function(){function e(){(0,a.default)(this,e)}return(0,r.default)(e,null,[{key:"HTMLDecode",value:function(e){return"string"!=typeof e?e:e.replace(l,(function(e,t){var n=i[e];return void 0===n&&(n=isNaN(t)?e:String.fromCharCode(160===t?32:t)),n}))}},{key:"replaceParamVal",value:function(e,t,n){var o=new RegExp(t+"=([^&]*)");return e.replace(o,t+"="+n)}}]),e}();t.default=d,(0,c.default)(d,"getUrlParam",(function(e,t){var n=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=e.split("?"),i=o[o.length-1]?o[o.length-1].match(n):o[0].match(n);return null!==i?i[2].split("#")[0]:null}))},function(e,t,n){"use strict";var o=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(1)),a=o(n(2)),r=o(n(3));n(4),n(5),n(6),n(15);var c=o(n(7)),l=o(n(8)),d=n(9),s=o(n(10)),u=o(n(11)),f=o(n(12)),p=o(n(13));function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var m,h={ruleTitle:{"zh-cn":"活动规则","en-us":"Terms & Conditions"},ok:{"zh-cn":"确认","en-us":"OK"}};!function(e){e.china="¥",e.hk="$"}(m||(m={}));var y={"zh-cn":{1:"原价 ",0:"省 "},"en-us":{1:"Original Price ",0:"Savings "}},b=function(){function e(t){(0,i.default)(this,e),(0,r.default)(this,"$el",void 0),(0,r.default)(this,"$tabContent",void 0),(0,r.default)(this,"lang",(document.querySelector("html").getAttribute("lang")||"zh-cn").toLowerCase()),(0,r.default)(this,"site",(document.querySelector("html").getAttribute("site")||"china").toLowerCase()),this.$el=$(t),this.$tabContent=this.$el.find(".activity-promotion02-tab-content-item"),c.default.getInstance(t),this.lazyload(t)}return(0,a.default)(e,[{key:"lazyload",value:function(e){var t=this;c.default.addListener(e,(function(){t.$el.attr("component-lazyload","true"),t.init(),t.bindEvents()}))}},{key:"init",value:function(){var e=this.$el.attr("section-theme"),t=this.$el.attr("section-bg-pc");["transpdark","transplight"].includes(e)&&t&&this.$el.css("background-image","url(".concat(t,")")),this.equalHeight(),this.createPromotion()}},{key:"createPromotion",value:function(){var e=this;this.$el.find(".activity-promotion02-tab-content-item.active").find(".activity-promotion02-tab-content-item-row").each((function(t,n){var o=0,i=0;$(n).find(".activity-promotion02-tab-content-item-card").each((function(t,n){var a,c,h,b,g=$(n);if(!g.attr("render")){var k=JSON.parse(g.find("textarea.activity-data").val().toString());if("introduce"!==k.content.type){if((null==k||null===(a=k.content)||void 0===a?void 0:a.setProgress)&&o++,(null==k||null===(c=k.content)||void 0===c?void 0:c.loadsource)&&i++,k.content.saleSwitch=null!=k&&null!==(h=k.content)&&void 0!==h&&h.saleSwitch?k.content.saleSwitch:0,["common","domain1","domain2","advantage1","image1"].includes(k.content.type)){var x,w,C,O,T,P;if(null===(x=k.menu)||void 0===x||!x.dataUrl)return;var S=Object.assign(k.content,{dataUrl:null===(w=k.menu)||void 0===w?void 0:w.dataUrl},{additional:(null===(C=k.menu)||void 0===C?void 0:C.additional)||[]},{formSet:(null===(O=k.menu)||void 0===O||null===(T=O.dynamicTable)||void 0===T?void 0:T.table)||[]},{disabledData:(null===(P=k.menu)||void 0===P?void 0:P.disabledData)||[]});S.setOrderTip=S.setOrderTip||{},S.setOrderTip.showDiscount=S.showDiscount,S.setOrderTip.otherInfo=S.otherInfo,"domain1"===k.content.type&&(S.inputType="1-radio"),new l.default(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({targetContainer:g},S))}else if("introduce"!==k.content.type){var _={currencySymbolVisible:!0,currencySymbol:m[e.site],isDiscount:Boolean(k.content.discount!==k.content.original),isFree:Boolean(0===k.content.discount&&k.content.freeText),sale:null,setOrderTip:{otherInfo:[]},href:k.content.href,btnText:k.content.btnText};_.sale="".concat(k.content.saleSwitch?k.content.original.toFixed(2):(k.content.original-k.content.discount).toFixed(2)),_.sale="".concat(y[e.lang][k.content.saleSwitch]).concat(m[e.site]+_.sale),_.setOrderTip.otherInfo=k.content.otherInfo;var L=k.content.discount.toFixed(2).split(".");_.integer=L[0],_.decimal=".".concat(L[1])||!1,_.isFree&&(_.integer=k.content.freeText,_.currencySymbolVisible=!1),g.find(".pkg-order-container").html(new s.default(u.default).render(_))}g.attr("render","true");var j=new d.OrderCheck(g,k.content.type);null!==(b=k.content.type)&&void 0!==b&&b.match("domain")&&g.on("click keydown",".domain-check .u-icon-search,input",(function(e){if(!("click"===e.type&&"INPUT"===e.target.nodeName||e.keyCode&&13!==e.keyCode)){var t=j.getDomain(),n=t.domainPrefix+t.domainSuffix;if(!t.domainPrefix)return g.find(".activity-promotion-domain-check-container").addClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_noInput")),void g.find(".pkg-order-btn").attr("domainCheck","false");f.default.domainCheck(n).then((function(e){var t=e.data;if(t.availability){g.find(".activity-promotion-domain-check-container").removeClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_".concat(t.availability))),g.find(".pkg-order-btn").attr("domainCheck","true");var o=g.find(".pkg-order-btn").attr("href");o=o.match("domainName=")?p.default.replaceParamVal(o,"domainName",n):o.replace("promotionId","domainName=".concat(n,"&promotionId")),g.find(".pkg-order-btn").attr("href",o)}else g.find(".activity-promotion-domain-check-container").addClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_".concat(t.availability))),g.find(".pkg-order-btn").attr("domainCheck","false")})).catch((function(e){g.find(".activity-promotion-domain-check-container").addClass("error").find(".domain-check-response").text(window.errMsg("domainCheck_false")),g.find(".pkg-order-btn").attr("domainCheck","false")}))}}))}}})),o&&$(n).find(".activity-promotion02-tab-content-item-card").addClass("has-progress"),i&&$(n).find(".activity-promotion02-tab-content-item-card").addClass("has-loadsource")}))}},{key:"bindEvents",value:function(){var e=this;this.$el.find(".activity-promotion02-tab-title-item").on("click",(function(t){var n=$(t.target).closest(".activity-promotion02-tab-title-item"),o=n.index();n.addClass("active").siblings().removeClass("active"),e.$tabContent.eq(o).addClass("active").siblings().removeClass("active"),e.equalHeight(),e.createPromotion()})),this.$el.find('.activity-promotion02-tab-content-item-card:not([promotion-type="introduce"])').on("mouseover",(function(e){var t=$(e.target).closest(".activity-promotion02-tab-content-item-card");t.closest(".activity-promotion02-tab-content-item").find(".activity-promotion02-tab-content-item-card").removeClass("active"),t.addClass("active")})),this.$el.on("click",".show-more-btn",(function(t){var n=$(t.target).closest(".activity-promotion02-tab-content-item"),o=$(window).scrollTop();n.toggleClass("show-all"),$(window).scrollTop(o),e.equalHeight()})),this.$el.on("change keydown focus",'[name="domainCheck"]',(function(e){var t=$(e.target).closest(".activity-promotion-card");t.find(".activity-promotion-domain-check-container").removeClass("error").find(".domain-check-response").text(""),t.find(".pkg-order-btn").removeAttr("domainCheck")})),this.$el.delegate('[bi_parent_name="域名"] input',"click",(function(e){var t=$(e.target).closest(".activity-promotion-card"),n=$(e.target).val();t.find(".pkg-order-btn").attr("id").match(n)||(t.find(".activity-promotion-domain-check-container").removeClass("error").find(".domain-check-response").text(""),t.find(".pkg-order-btn").removeAttr("domainCheck"))}));var t=$.fn.porModal.Constructor,n=this.$el.find(".activity-rule").next().val().toString();this.$el.find(".activity-rule").on("click",(function(o){n=n.match("&lt;br&gt;")?n.replace(/<\/?p>/gi,""):n,n=p.default.HTMLDecode(n);var i='<ul class="activity-rule-dialog-container">\n            '.concat(n.replace(/<p>/gi,"<li>").replace(/<\/p>/gi,"</li>"),"\n            </ul>");t.show({title:h.ruleTitle[e.lang],text:i,size:"large",buttons:[{style:t.buttonStyle.primary,text:h.ok[e.lang]}]})}))}},{key:"equalHeight",value:function(){this.$el.find(".activity-promotion02-tab-content-item.active").find(".activity-promotion02-tab-content-item-row").each((function(e,t){if(!$(t).is(":hidden")&&!$(t).attr("equal-height")){var n=0;$(t).find('.activity-promotion-card:not([promotion-type="introduce"]) .activity-promotion02-tab-content-item-card-subtitle').each((function(e,t){$(t).outerHeight()>n&&(n=$(t).outerHeight())})).promise().then((function(e){$(e).height(n)})),$(t).attr("equal-height","true")}}))}}],[{key:"moduleName",value:function(){return"pep-activity-promotion02"}}]),e}();t.default=b},function(e,t,n){}])}));