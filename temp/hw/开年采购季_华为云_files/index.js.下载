feloader.add("@cloud/pep-navigation-bar/pc/index",["@cloud/lazyload"],(function(t,e,i){i.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/build/",i(i.s=1)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){"use strict";var n=i(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(2)),r=n(i(3)),o=n(i(4));i(5);var s=n(i(6)),l=n(i(7)),c=n(i(8)),d=function(){function t(e){var i=this;(0,a.default)(this,t),(0,o.default)(this,"$el",void 0),(0,o.default)(this,"$wrapper",void 0),(0,o.default)(this,"wrapperHeight",void 0),(0,o.default)(this,"fixedTop",(0,l.default)()),(0,o.default)(this,"scrollDiff",void 0),(0,o.default)(this,"$anchor",void 0),(0,o.default)(this,"$activeli",void 0),(0,o.default)(this,"hashs",void 0),(0,o.default)(this,"$sections",$("")),(0,o.default)(this,"stateFixed",!1),(0,o.default)(this,"liset",void 0),(0,o.default)(this,"wrapperWidth",void 0),(0,o.default)(this,"activeAnchor",void 0),this.$el=$(e),this.$wrapper=this.$el.find(".pagenav-wrapper"),this.$anchor=this.$el.find(".pagenav-anchor"),this.wrapperHeight=this.$wrapper.outerHeight(),this.scrollDiff=-(this.wrapperHeight+this.fixedTop),this.hashs=this.$anchor.filter('[href^="#"]').map((function(t,e){return $(e).attr("href")})).toArray(),this.hashs.forEach((function(t){var e=$(t);e.length>0&&(i.$sections=i.$sections.add(e))})),this.liset=$(".pagenav-wrapper").find("li"),this.wrapperWidth=0,$(document).ready((function(){i.changeWidth(),i.changeText()})),this.updateFixedState(),this.init(),this.bindEvent()}return(0,r.default)(t,[{key:"updateFixedState",value:function(){this.shouldFixed()?this.fixedProxy():this.unFixed()}},{key:"shouldFixed",value:function(){var t=$(".pep-navigation-bar").eq(0).attr("data-banner-class");return $(".pep-activity-banner-v7:visible")&&$(".pep-activity-banner-v7:visible").get(0)?$(".pep-activity-banner-v7:visible").get(0).getBoundingClientRect().bottom-this.wrapperHeight<=this.fixedTop:$(".banner-activity-component:visible")&&$(".banner-activity-component:visible").get(0)?$(".banner-activity-component:visible").get(0).getBoundingClientRect().bottom-this.wrapperHeight<=this.fixedTop:!(!$("."+t+":visible")||!$("."+t+":visible").get(0))&&$("."+t+":visible").get(0).getBoundingClientRect().bottom-this.wrapperHeight<=this.fixedTop}},{key:"fixedProxy",value:function(){this.fixed(),this.syncActivation()}},{key:"fixed",value:function(){this.$wrapper.css({top:this.fixedTop+"px"}).addClass("fixed"),"true"===this.$wrapper.attr("data-show")&&"edit"!==this.$wrapper.attr("data-edit")&&(this.$wrapper.css({position:"fixed"}).removeClass("show"),this.$wrapper.find(".btn-right").css({display:"block"})),this.stateFixed=!0,window.innerWidth<678&&this.setUlWidth()}},{key:"unFixed",value:function(){this.$wrapper.css({top:""}).removeClass("fixed"),"true"===this.$wrapper.attr("data-show")&&window.innerWidth>678&&(this.$wrapper.css({position:"static"}).addClass("show"),"edit"===this.$wrapper.find(".btn-right").attr("data-edit")?this.$wrapper.find(".btn-right").css({display:"block"}):this.$wrapper.find(".btn-right").css({display:"none"})),this.stateFixed=!1}},{key:"activeNavItem",value:function(t){this.$anchor.removeClass("active").filter('[href="#'+t+'"]').addClass("active"),this.$activeli=this.$anchor.filter('[href="#'+t+'"]'),this.scrollToView()}},{key:"removeActiveNavItem",value:function(){this.$wrapper.hasClass("show")||this.$anchor.removeClass("active")}},{key:"syncActivation",value:function(){if(!1!==this.stateFixed){if($(document).scrollTop()>=$(document).height()-$(window).height())this.activeAnchor?(this.$anchor.removeClass("active").filter('[href="'+this.activeAnchor+'"]').addClass("active"),this.activeAnchor=""):$("#footer").height()&&this.$anchor.last().height()+$("#footer").height()>$(window).height()&&this.$anchor.removeClass("active").last().addClass("active");else for(var t=this.$sections.length-1;t>=0;t--){var e=this.$sections.eq(t),i=e.get(0).getBoundingClientRect();if(i){if(i.top<=-this.scrollDiff&&i.bottom>=-this.scrollDiff){this.activeNavItem(e.attr("id"));break}if(i.bottom<=-this.scrollDiff){this.removeActiveNavItem();break}}}this.$sections&&this.$sections.eq(0).get(0)&&this.$sections.eq(0).get(0).getBoundingClientRect().top>=$(window).height()&&this.removeActiveNavItem()}}},{key:"changeText",value:function(){window.innerWidth<678&&this.$anchor.find(".a-text").map((function(t,e){return $(e).text($(e).attr("nav-mobile"))}))}},{key:"setUlWidth",value:function(){var t=0,e="normal"===this.$wrapper.attr("data-nav-type");this.$el.find(".item").map((function(i,n){return t+=$(n).width(),e&&(t+=32),!1})),this.$el.find("ul").width(t),e&&t>375&&($(".pep-navigation-bar ul>li:first-child").css("padding-left","16px"),$(".pep-navigation-bar ul>li:last-child").css("padding-right","16px"))}},{key:"changeWidth",value:function(){var t,e;for(t=0;t<this.liset.length;t++)e=this.liset[t].clientWidth,this.wrapperWidth+=e;this.wrapperWidth<=375&&(this.$el.find(".pep-navigation-bar .nav-content").css("display","flex"),this.$el.find(".pep-navigation-bar .nav-content li").css("flex","1"))}},{key:"scrollToView",value:function(){var t=window.innerWidth||document.documentElement.clientWidth,e=this.$activeli.get(0).getBoundingClientRect().right,i=this.$activeli.get(0).getBoundingClientRect().left,n=this.$activeli.outerWidth(),a=this.$activeli.get(0).offsetLeft;i<0?"activity"===this.$wrapper.attr("data-nav-type")?this.$wrapper.find(".pagenav-container").stop(!0,!0).animate({scrollLeft:a},100):this.$wrapper.find(".nav-content").stop(!0,!0).animate({scrollLeft:a-16},100):e>t&&("activity"===this.$wrapper.attr("data-nav-type")?this.$wrapper.find(".pagenav-container").stop(!0,!0).animate({scrollLeft:a-t+n},100):this.$wrapper.find(".nav-content").stop(!0,!0).animate({scrollLeft:a-t+n+16},100))}},{key:"init",value:function(){var t=this;setTimeout((function(){s.default.getInstance(t.$el[0])}),20)}},{key:"bindEvent",value:function(){var t=this;$(window).on("scroll",(function(){t.updateFixedState(),t.syncActivation()})),$('a[href^="#"]').on("click",(function(e){e.preventDefault(),e.stopPropagation();var i=$(e.currentTarget).attr("href"),n=t.scrollDiff;(0,c.default)(i,n),t.activeAnchor=i,t.syncActivation()}))}}],[{key:"moduleName",value:function(){return"pep-navigation-bar"}}]),t}();e.default=d},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,i){},function(e,i){e.exports=t("@cloud/lazyload")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){var t=$("#header .header-container");return"fixed"===t.css("position")?t.outerHeight():0};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t,e){var i=$(t),n=i.offset();if("#"!==t&&0!==i.length&&n){var a=Math.ceil(i.offset().top)+e;$("body,html").stop().animate({scrollTop:a})}};e.default=n}])}));