(function($){"use strict";function safeAdd(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}function md5cmn(q,a,b,x,s,t){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}function binlMD5(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var i;var olda;var oldb;var oldc;var oldd;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=md5ff(a,b,c,d,x[i],7,-680876936);d=md5ff(d,a,b,c,x[i+1],12,-389564586);c=md5ff(c,d,a,b,x[i+2],17,606105819);b=md5ff(b,c,d,a,x[i+3],22,-1044525330);a=md5ff(a,b,c,d,x[i+4],7,-176418897);d=md5ff(d,a,b,c,x[i+5],12,1200080426);c=md5ff(c,d,a,b,x[i+6],17,-1473231341);b=md5ff(b,c,d,a,x[i+7],22,-45705983);a=md5ff(a,b,c,d,x[i+8],7,1770035416);d=md5ff(d,a,b,c,x[i+9],12,-1958414417);c=md5ff(c,d,a,b,x[i+10],17,-42063);b=md5ff(b,c,d,a,x[i+11],22,-1990404162);a=md5ff(a,b,c,d,x[i+12],7,1804603682);d=md5ff(d,a,b,c,x[i+13],12,-40341101);c=md5ff(c,d,a,b,x[i+14],17,-1502002290);b=md5ff(b,c,d,a,x[i+15],22,1236535329);a=md5gg(a,b,c,d,x[i+1],5,-165796510);d=md5gg(d,a,b,c,x[i+6],9,-1069501632);c=md5gg(c,d,a,b,x[i+11],14,643717713);b=md5gg(b,c,d,a,x[i],20,-373897302);a=md5gg(a,b,c,d,x[i+5],5,-701558691);d=md5gg(d,a,b,c,x[i+10],9,38016083);c=md5gg(c,d,a,b,x[i+15],14,-660478335);b=md5gg(b,c,d,a,x[i+4],20,-405537848);a=md5gg(a,b,c,d,x[i+9],5,568446438);d=md5gg(d,a,b,c,x[i+14],9,-1019803690);c=md5gg(c,d,a,b,x[i+3],14,-187363961);b=md5gg(b,c,d,a,x[i+8],20,1163531501);a=md5gg(a,b,c,d,x[i+13],5,-1444681467);d=md5gg(d,a,b,c,x[i+2],9,-51403784);c=md5gg(c,d,a,b,x[i+7],14,1735328473);b=md5gg(b,c,d,a,x[i+12],20,-1926607734);a=md5hh(a,b,c,d,x[i+5],4,-378558);d=md5hh(d,a,b,c,x[i+8],11,-2022574463);c=md5hh(c,d,a,b,x[i+11],16,1839030562);b=md5hh(b,c,d,a,x[i+14],23,-35309556);a=md5hh(a,b,c,d,x[i+1],4,-1530992060);d=md5hh(d,a,b,c,x[i+4],11,1272893353);c=md5hh(c,d,a,b,x[i+7],16,-155497632);b=md5hh(b,c,d,a,x[i+10],23,-1094730640);a=md5hh(a,b,c,d,x[i+13],4,681279174);d=md5hh(d,a,b,c,x[i],11,-358537222);c=md5hh(c,d,a,b,x[i+3],16,-722521979);b=md5hh(b,c,d,a,x[i+6],23,76029189);a=md5hh(a,b,c,d,x[i+9],4,-640364487);d=md5hh(d,a,b,c,x[i+12],11,-421815835);c=md5hh(c,d,a,b,x[i+15],16,530742520);b=md5hh(b,c,d,a,x[i+2],23,-995338651);a=md5ii(a,b,c,d,x[i],6,-198630844);d=md5ii(d,a,b,c,x[i+7],10,1126891415);c=md5ii(c,d,a,b,x[i+14],15,-1416354905);b=md5ii(b,c,d,a,x[i+5],21,-57434055);a=md5ii(a,b,c,d,x[i+12],6,1700485571);d=md5ii(d,a,b,c,x[i+3],10,-1894986606);c=md5ii(c,d,a,b,x[i+10],15,-1051523);b=md5ii(b,c,d,a,x[i+1],21,-2054922799);a=md5ii(a,b,c,d,x[i+8],6,1873313359);d=md5ii(d,a,b,c,x[i+15],10,-30611744);c=md5ii(c,d,a,b,x[i+6],15,-1560198380);b=md5ii(b,c,d,a,x[i+13],21,1309151649);a=md5ii(a,b,c,d,x[i+4],6,-145523070);d=md5ii(d,a,b,c,x[i+11],10,-1120210379);c=md5ii(c,d,a,b,x[i+2],15,718787259);b=md5ii(b,c,d,a,x[i+9],21,-343485551);a=safeAdd(a,olda);b=safeAdd(b,oldb);c=safeAdd(c,oldc);d=safeAdd(d,oldd)}return[a,b,c,d]}function binl2rstr(input){var i;var output="";var length32=input.length*32;for(i=0;i<length32;i+=8){output+=String.fromCharCode(input[i>>5]>>>i%32&255)}return output}function rstr2binl(input){var i;var output=[];output[(input.length>>2)-1]=undefined;for(i=0;i<output.length;i+=1){output[i]=0}var length8=input.length*8;for(i=0;i<length8;i+=8){output[i>>5]|=(input.charCodeAt(i/8)&255)<<i%32}return output}function rstrMD5(s){return binl2rstr(binlMD5(rstr2binl(s),s.length*8))}function rstrHMACMD5(key,data){var i;var bkey=rstr2binl(key);var ipad=[];var opad=[];var hash;ipad[15]=opad[15]=undefined;if(bkey.length>16){bkey=binlMD5(bkey,key.length*8)}for(i=0;i<16;i+=1){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}hash=binlMD5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binlMD5(opad.concat(hash),512+128))}function rstr2hex(input){var hexTab="0123456789abcdef";var output="";var x;var i;for(i=0;i<input.length;i+=1){x=input.charCodeAt(i);output+=hexTab.charAt(x>>>4&15)+hexTab.charAt(x&15)}return output}function str2rstrUTF8(input){return unescape(encodeURIComponent(input))}function rawMD5(s){return rstrMD5(str2rstrUTF8(s))}function hexMD5(s){return rstr2hex(rawMD5(s))}function rawHMACMD5(k,d){return rstrHMACMD5(str2rstrUTF8(k),str2rstrUTF8(d))}function hexHMACMD5(k,d){return rstr2hex(rawHMACMD5(k,d))}function md5(string,key,raw){if(!key){if(!raw){return hexMD5(string)}return rawMD5(string)}if(!raw){return hexHMACMD5(key,string)}return rawHMACMD5(key,string)}$.md5=md5})(window||this);if(typeof wiseTrace==="undefined"){(function($){"use strict";var DEFAULT_NEED_USERID_HASH=false;var DEFAULT_NEED_COOKIE=true;var DEFAULT_NEED_TRACEID=false;var DEFAULT_NEED_IMPORT_TINYREPORTER_JS=true;var DEFAULT_NEED_IMPORT_PMP_JS=true;var GROUPID_VERSION="3";var MAX_TEXT_LENGTH=24;var DEFAULT_REPORT_DOMAIN="portal.huaweicloud.com";var wiseTrace={};var T;var byteToHex=[];var getRandomValues;wiseTrace.version=GROUPID_VERSION;wiseTrace.cookieTime=5e3;wiseTrace.reportTime=5e3;wiseTrace.reportApiUrl="https://"+DEFAULT_REPORT_DOMAIN+"/api/ca/v1/template";wiseTrace.queryId="kafkaSendMessageProduce";wiseTrace.cloudCookieDomain=".huaweicloud.com";wiseTrace.intfInvokeLogs=[];wiseTrace.noIntfInvokeLogs=[];wiseTrace.apiAutoReport=false;wiseTrace.domainId="";wiseTrace._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";wiseTrace.needUserIdHash=DEFAULT_NEED_USERID_HASH;wiseTrace.needCookie=DEFAULT_NEED_COOKIE;wiseTrace.needTraceId=DEFAULT_NEED_TRACEID;wiseTrace.needImportTinyReporterJs=DEFAULT_NEED_IMPORT_TINYREPORTER_JS;wiseTrace.needImportPmpJs=DEFAULT_NEED_IMPORT_PMP_JS;wiseTrace.PRODUCT_REG=".huaweicloud.com|cbcmc.huaweisre.com|cloudbi.huawei.com|cloudcrm.huawei.com";wiseTrace.configLists=[{urlReg:"file://"},{urlReg:"cloudbi.huawei.com"},{urlReg:"account.huaweicloud.com"},{urlReg:"account-intl.huaweicloud.com",userIdHash:true,needCookie:false,reportDomain:"portal-intl.huaweicloud.com"},{urlReg:"console.huaweicloud.com/ecm/",traceId:true},{urlReg:"cbcmc.huaweisre.com"},{urlReg:"(www|activity|support).huaweicloud.com(?!/intl/)"},{urlReg:"marketplace.huaweicloud.com(?!/intl/)|console.huaweicloud.com/marketplace/"},{urlReg:"(bbs|developer|edu).huaweicloud.com(?!/intl/)"},{urlReg:"reg.huaweicloud.com"},{urlReg:"cloudcrm.huawei.com"},{urlReg:"finance.huawei.com",userIdHash:true,needCookie:false},{urlReg:"auth.huaweicloud.com"}];wiseTrace.extInfo={};wiseTrace.URL_WHITELIST_DOMAINS_REG="(portal|mkpdata).huaweicloud.com|mcloud-uat.huawei.com|w3m.huawei.com";wiseTrace.ANGULAR=["cloudbi.huawei.com","cloudcrm.huawei.com"];wiseTrace.REFRESHTIMEINTERVAL=5e3;wiseTrace.requestUrlMaps={};wiseTrace.hash_param="param";wiseTrace.hash_param_value="";wiseTrace.WHITELIST_HASH=["#/ecs/createVm"];wiseTrace.isConsole=false;wiseTrace.API_BLICKLIST_REG="/rest/silvan|/rest/v1.0/.*/tracker$|/rest/mc|https://portal.huaweicloud.com/api/monitor";wiseTrace.codeWhiteList=["email_208070326","email_208070327","email_508070210","email_208070325","modifycontract_CBC.0152","modifycontract_CBC.0153","modifycontract_CBC.0154","modifycontract_CBC.0250","modifycontract_CBC.0200","modifycontract_CBC.0300","modifycontract_CBC.0999","CODE_CBC.4001","5080204003","apply_CBC.0999","errorMsgNoCode","101000003","!0","network_error","5080204012","5080204006","5080204001","508030112","508030111","508030106","508030199","508030103","508030104","508030108","508030109","508030110","508030115","508030119","508030120","508030121","508030150","508030160","508030161","508030162","508030163","508030164","508030170","508030180","508030500","508030501","508030502","508030503","508030504","508030507","508030514","508030515","508030516","508030517","508030200","508030201","508030202","508030203","508030213","508030221","508030300","508030302","508030303","508030301","500","508030400","508030401","508030402","508030403","508030404","508030405","508030406","508030407","508030409","508030410","508030411","508030412","508030413","508030414","508030415","508030416","508030417","508030446","508030123","508040120","403","508040875","508110510","phone_111111001","phone_111113009","CBC.0100","CBC.0999","CBC.3105","CBC.3109","CBC.3111","CBC.3113","CBC.3115","CBC.3117","CBC.3143","208070425","508070210","508070216","508070218","508070211","208070312","508070217","508040157","508040102","508040101","508040248","508040207","508040177","508040178","508040179","508040180","508040181","508040182","508040202","508040215","508040201","508040250","508040208","508040240","111113011","111112092","111112075","111112073","111112089","508040205","508050201","508040808","508040834","508040835","508040876","508040884","508040833","508040862","508040900","508030198","508010509","508010506","5080105","508060103","508060104","508060108","508060110","508060300","508060301","508060302","508060408","508064029","2030000000016","CBC.8002","CBC.8001","CBC.0300","50806010","508060100","CODE_CBC.0999","errDefalutNotice"];wiseTrace.realXhr="RealXMLHttpRequest";wiseTrace.hash="";wiseTrace.requestMap={};wiseTrace.PROXY=["v1/proxy/app-api"];wiseTrace.hookRequest=function(param){var requestId=wiseTrace.generateUUID();try{wiseTrace.requestMap[requestId]=param;wiseTrace.requestMap[requestId].groupId=window.wiseLinkInfo;wiseTrace.requestMap[requestId].requestTime=+new Date}catch(error){}return requestId};wiseTrace.getIframe=function(){var parentUrl="";try{if(top!=self){parentUrl=document.referrer}}catch(err){}return parentUrl};wiseTrace.setDomainId=function(domainId){wiseTrace.domainId=domainId};wiseTrace.getCBCCode=function(data){var retCode="0";if(data&&data.retCode){retCode=data.retCode}else if(data&&data.resultCode){retCode=data.resultCode}else if(data&&data.error_code){retCode=data.error_code}else if(data&&data.errCode){retCode=data.errCode}else if(data&&data.code){retCode=data.code}else if(data&&data.exceptionId){retCode=data.exceptionId}return retCode};wiseTrace.base64Decode=function(input){function _utf8_decode(utftext){var string="";var i=0;var c=0;var c1=0;var c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++}else if(c>191&&c<224){c2=utftext.charCodeAt(i+1);string+=String.fromCharCode((c&31)<<6|c2&63);i+=2}else{c2=utftext.charCodeAt(i+1);c3=utftext.charCodeAt(i+2);string+=String.fromCharCode((c&15)<<12|(c2&63)<<6|c3&63);i+=3}}return string}var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=wiseTrace._keyStr.indexOf(input.charAt(i++));enc2=wiseTrace._keyStr.indexOf(input.charAt(i++));enc3=wiseTrace._keyStr.indexOf(input.charAt(i++));enc4=wiseTrace._keyStr.indexOf(input.charAt(i++));chr1=enc1<<2|enc2>>4;chr2=(enc2&15)<<4|enc3>>2;chr3=(enc3&3)<<6|enc4;output=output+String.fromCharCode(chr1);if(enc3!=64){output=output+String.fromCharCode(chr2)}if(enc4!=64){output=output+String.fromCharCode(chr3)}}output=_utf8_decode(output);return output};wiseTrace.hookRespone=function(data,requestId,traceId){try{if(wiseTrace.requestMap&&wiseTrace.requestMap[requestId]){var req=wiseTrace.requestMap[requestId];var url=req.url;var body=req.body;var method=req.method;var groupId=req.groupId;var requestTime=req.requestTime;if(wiseTrace.PROXY.length&&new RegExp(wiseTrace.PROXY.join("|")).test(url)){if(body&&body.cbc_uri){url=wiseTrace.base64Decode(body.cbc_uri);method=body.cbc_method}}if(data&&url&&wiseTrace.apiWhiteListCheck(url)){try{var tmpObj={cbc:true};tmpObj.url=url;tmpObj.groupId=groupId;tmpObj.method=method;tmpObj.startTime=requestTime;tmpObj.delay=(new Date).getTime()-tmpObj.startTime;if(traceId){tmpObj.traceId=traceId}if(data.cbc_headers&&data.cbc_headers.length){for(var i=0;i<data.cbc_headers.length;i++){if(data.cbc_headers[i]&&data.cbc_headers[i].name=="wise_traceid"){try{var tmp=JSON.parse(data.cbc_headers[i].value);tmpObj.traceId=tmp[0]}catch(error){}break}}}tmpObj.retCode=wiseTrace.getCBCCode(data);tmpObj.cbcCode=tmpObj.retCode;if($.inArray(tmpObj.retCode,["0","CBC.0000"])>-1||$.inArray(tmpObj.retCode,wiseTrace.codeWhiteList)==-1){tmpObj.retCode="0"}if(wiseTrace.apiAutoReport&&tmpObj.groupId){wiseTrace.intfInvokeLogs.push(tmpObj)}}catch(e){}}}}catch(e){}};wiseTrace.hookAjax=function(proxy){window[wiseTrace.realXhr]=window[wiseTrace.realXhr]||XMLHttpRequest;XMLHttpRequest=function(){var xhr=new window[wiseTrace.realXhr];for(var attr in xhr){var type="";try{type=typeof xhr[attr]}catch(e){}if(type==="function"){this[attr]=hookFunction(attr)}else{Object.defineProperty(this,attr,{get:getterFactory(attr),set:setterFactory(attr),enumerable:true})}}this.xhr=xhr};function getterFactory(attr){return function(){var v=this.hasOwnProperty(attr+"_")?this[attr+"_"]:this.xhr[attr];var attrGetterHook=(proxy[attr]||{})["getter"];return attrGetterHook&&attrGetterHook(v,this)||v}}function setterFactory(attr){return function(v){var xhr=this.xhr;var that=this;var hook=proxy[attr];if(typeof hook==="function"){xhr[attr]=function(){try{proxy[attr](that)||v.apply(xhr,arguments)}catch(err){}}}else{var attrSetterHook=(hook||{})["setter"];v=attrSetterHook&&attrSetterHook(v,that)||v;try{xhr[attr]=v}catch(e){this[attr+"_"]=v}}}}function hookFunction(fun){return function(){var args=[].slice.call(arguments);if(proxy[fun]&&proxy[fun].call(this,args,this.xhr)){return}try{return this.xhr[fun].apply(this.xhr,args)}catch(err){console&&console.log(err)}}}return window[wiseTrace.realXhr]};wiseTrace.unHookAjax=function(){if(window[wiseTrace.realXhr])XMLHttpRequest=window[wiseTrace.realXhr];window[wiseTrace.realXhr]=undefined};wiseTrace.getRootScope=function(){var tmpRootScope;try{tmpRootScope=$("html").scope()}catch(err){}return tmpRootScope};wiseTrace.getDeviceId=function(){var deviceId=wiseTrace.getCookie("deviceid");try{if(!deviceId&&window["localStorage"]&&window["localStorage"]["getItem"]("deviceid")){deviceId=window["localStorage"]["getItem"]("deviceid");wiseTrace.setCookie("deviceid",deviceId,31536e8)}else if(deviceId&&window["localStorage"]){window["localStorage"]["setItem"]("deviceid",deviceId)}else{deviceId=wiseTrace.generateUUID();if(window["localStorage"]){window["localStorage"]["setItem"]("deviceid",deviceId)}wiseTrace.setCookie("deviceid",deviceId,31536e8)}}catch(err){}return deviceId};wiseTrace.getQueryString=function(name){var tmpRootScope=wiseTrace.getRootScope();var regionCode;try{var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)");var r=window.location.search.substr(1).match(reg);if(r){regionCode=unescape(r[2])}else if(tmpRootScope&&tmpRootScope.selectRegionId){regionCode=tmpRootScope.selectRegionId}else{regionCode=""}}catch(e){regionCode=""}return regionCode};wiseTrace.signed_crc_table=function(){var c=0,table=new Array(256);for(var n=0;n!=256;++n){c=n;c=c&1?-306674912^c>>>1:c>>>1;c=c&1?-306674912^c>>>1:c>>>1;c=c&1?-306674912^c>>>1:c>>>1;c=c&1?-306674912^c>>>1:c>>>1;c=c&1?-306674912^c>>>1:c>>>1;c=c&1?-306674912^c>>>1:c>>>1;c=c&1?-306674912^c>>>1:c>>>1;c=c&1?-306674912^c>>>1:c>>>1;table[n]=c}return typeof Int32Array!=="undefined"?new Int32Array(table):table};wiseTrace.trimEmpty=function(value){if(!value){return""}return value.replace(/(^\s*)|(\s*$)/g,"")};wiseTrace.generateUUID=function(){var chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";var d=(new Date).getTime();var uuid="xxxxyxxx".replace(/[xy]/g,function(c){var rnum=(d+Math.random()*62)%62|0;var r=chars.charAt(rnum);return(c=="x"?r:r&3|8).toString(16)});return uuid};wiseTrace.getCookieDomain=function(){var host=location.hostname;var ip=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;try{if(ip.test(host)===true||host==="localhost"){return host}var regex=/([^]*).*/;var match=host.match(regex);if(typeof match!=="undefined"&&null!==match){host=match[1]}if(typeof host!=="undefined"&&null!==host){var strAry=host.split(".");if(strAry.length>1){host=strAry[strAry.length-2]+"."+strAry[strAry.length-1]}}}catch(err){}return"."+host};wiseTrace.randomValue=function(){for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}getRandomValues=typeof window.crypto!=="undefined"&&window.crypto.getRandomValues&&window.crypto.getRandomValues.bind(window.crypto)||typeof window.msCrypto!=="undefined"&&typeof window.msCrypto.getRandomValues==="function"&&window.msCrypto.getRandomValues.bind(window.msCrypto);if(!getRandomValues){getRandomValues=function(array){for(var i=0,r;i<array.length;i++){if((i&3)===0){r=Math.random()*4294967296}array[i]=r>>>((i&3)<<3)&255}return array}}};wiseTrace.traceUuid=function(len){var bytes=null;var uuid="";try{if(getRandomValues){if(typeof Uint8Array!=="undefined"){bytes=new Uint8Array(len||16)}else{bytes=new Array(len||16)}getRandomValues(bytes);if(bytes&&bytes.length){for(var i=0;i<bytes.length;i++){uuid+=byteToHex[bytes[i]]}}}}catch(err){}return uuid};wiseTrace.isInConfig=function(href){var isInConfigList=false;try{for(var i=0;i<wiseTrace.configLists.length;i++){var configItem=wiseTrace.configLists[i];if(configItem.urlReg&&href&&new RegExp(configItem.urlReg).test(href)){isInConfigList=true;if(typeof configItem.needCookie!=="undefined"){wiseTrace.needCookie=configItem.needCookie}if(typeof configItem.userIdHash!=="undefined"){wiseTrace.needUserIdHash=configItem.userIdHash}if(typeof configItem.needTraceId!=="undefined"){wiseTrace.needTraceId=configItem.needTraceId}if(typeof configItem.needImportTinyReporterJs!=="undefined"){wiseTrace.needImportTinyReporterJs=configItem.needImportTinyReporterJs}if(typeof configItem.needImportPmpJs!=="undefined"){wiseTrace.needImportPmpJs=configItem.needImportPmpJs}if(typeof configItem.reportDomain!=="undefined"){wiseTrace.reportApiUrl="https://"+configItem.reportDomain+"/api/ca/v1/template"}if(wiseTrace.needCookie){if(configItem.cloudCookieDomain){wiseTrace.cloudCookieDomain=configItem.cloudCookieDomain}else{wiseTrace.cloudCookieDomain=wiseTrace.getCookieDomain()}}break}}}catch(error){}return isInConfigList};wiseTrace.setReportToTestEnv=function(){wiseTrace.reportApiUrl="https://portal.ulanqab.huawei.com/api/ca/v1/template"};wiseTrace.initConfig=function(){try{if(window.frameworkVersion&&typeof customiseVer==="undefined"){wiseTrace.isConsole=true}var href=document&&document.location&&document.location.href;href=href&&href.split("?")[0];if(wiseTrace.isInConfig(href)){wiseTrace.apiAutoReport=true;if(wiseTrace.needTraceId){wiseTrace.randomValue()}}else if(href&&wiseTrace.PRODUCT_REG&&new RegExp(wiseTrace.PRODUCT_REG).test(href)){wiseTrace.apiAutoReport=false}else{wiseTrace.apiAutoReport=true;wiseTrace.setReportToTestEnv();wiseTrace.cookieTime=15e3;if(wiseTrace.isConsole){wiseTrace.randomValue()}wiseTrace.cloudCookieDomain=wiseTrace.getCookieDomain()}}catch(error){}};wiseTrace.apiWhiteListCheck=function(url){var flag=false;if(url!==wiseTrace.reportApiUrl&&!url.match(/\.(json|js|html|svg|jpg|png|gif)/)){if(wiseTrace.API_BLICKLIST_REG&&new RegExp(wiseTrace.API_BLICKLIST_REG).test(url)){flag=false}else{if(url.indexOf("http")===-1||window&&window.location&&window.location.host&&url.indexOf(window.location.host)>-1){flag=true}else{if(url&&wiseTrace.URL_WHITELIST_DOMAINS_REG&&new RegExp(wiseTrace.URL_WHITELIST_DOMAINS_REG).test(url)){flag=true}}}}return flag};wiseTrace.reportApi=function(syn){var domainId=wiseTrace.getDomainId(true);var params=[];var tmpIntfLogMap={};var groupIdMap={};try{if(wiseTrace.intfInvokeLogs&&wiseTrace.intfInvokeLogs.length){wiseTrace.intfInvokeLogs.map(function(intfInvokeLog){var tmpGroupId=wiseTrace.CRC32(intfInvokeLog.groupId);groupIdMap[tmpGroupId]=intfInvokeLog.groupId;var tmpIntfInvokeLog={};if(intfInvokeLog.traceId){tmpIntfInvokeLog.traceId=intfInvokeLog.traceId}if(intfInvokeLog.reqParam){tmpIntfInvokeLog.reqParam=intfInvokeLog.reqParam}tmpIntfInvokeLog.url=intfInvokeLog.url;tmpIntfInvokeLog.cbcCode=intfInvokeLog.cbcCode;if(intfInvokeLog.method){tmpIntfInvokeLog.method=intfInvokeLog.method}tmpIntfInvokeLog.cbc=intfInvokeLog.cbc;tmpIntfInvokeLog.startTime=intfInvokeLog.startTime;tmpIntfInvokeLog.delay=intfInvokeLog.delay;tmpIntfInvokeLog.retCode=intfInvokeLog.retCode;if(!tmpIntfLogMap[tmpGroupId]){tmpIntfLogMap[tmpGroupId]=[]}tmpIntfLogMap[tmpGroupId].push(tmpIntfInvokeLog)});wiseTrace.intfInvokeLogs=[];for(var i in tmpIntfLogMap){if(tmpIntfLogMap[i]&&tmpIntfLogMap[i].length){var tmpObj={};tmpObj.intfLogs=tmpIntfLogMap[i];if(groupIdMap[i]&&wiseTrace.extInfo[groupIdMap[i]]){tmpObj.extInfo=wiseTrace.extInfo[groupIdMap[i]]}if(groupIdMap[i]&&groupIdMap[i].indexOf("$domainId$")>-1){if(domainId=="$domainId$"){domainId=""}groupIdMap[i]=groupIdMap[i].replace("$domainId$",domainId)}tmpObj.groupId=groupIdMap[i];params.push(tmpObj)}}}if(params&&params.length){$.ajax({type:"POST",dataType:"json",async:syn,timeout:2e3,contentType:"text/plain",url:wiseTrace.reportApiUrl,data:JSON.stringify({queryId:wiseTrace.queryId,params:{pageLog:params}})})}}catch(e){}};wiseTrace.getPreGroupUrl=function(){var preGroupUrl;var hash=wiseTrace.hash;try{if(document&&document.location&&document.location.host){if(!hash){hash=window.location.hash;try{if(hash.indexOf("?")>-1){hash=hash.split("?")[0]}}catch(e){}}preGroupUrl=document.location.host;if(document.location.pathname){preGroupUrl+=document.location.pathname}if(hash&&hash.indexOf("#")==-1){preGroupUrl+="#"+hash}else{preGroupUrl+=hash}if(hash&&$.inArray(hash,wiseTrace.WHITELIST_HASH)>-1&&wiseTrace.hash_param_value){preGroupUrl+="?"+wiseTrace.hash_param+"="+wiseTrace.hash_param_value}}else if(document&&document.location&&document.location.pathname){preGroupUrl=document.location.pathname+document.location.hash}}catch(e){preGroupUrl=""}return preGroupUrl};wiseTrace.base64Encode=function(input){function _utf8_encode(string){string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c)}else if(c>127&&c<2048){utftext+=String.fromCharCode(c>>6|192);utftext+=String.fromCharCode(c&63|128)}else{utftext+=String.fromCharCode(c>>12|224);utftext+=String.fromCharCode(c>>6&63|128);utftext+=String.fromCharCode(c&63|128)}}return utftext}var output="";try{var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=_utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=(chr1&3)<<4|chr2>>4;enc3=(chr2&15)<<2|chr3>>6;enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64}else if(isNaN(chr3)){enc4=64}output=output+wiseTrace._keyStr.charAt(enc1)+wiseTrace._keyStr.charAt(enc2)+wiseTrace._keyStr.charAt(enc3)+wiseTrace._keyStr.charAt(enc4)}}catch(e){output=""}return output};wiseTrace.getDomainId=function(isNeedReplace){var tmpDomainId="";try{if(typeof jsonParamInit!=="undefined"){tmpDomainId=jsonParamInit["UserAccount"]}else if(typeof domainId!="undefined"){tmpDomainId=domainId}else{var tmpRootScope=wiseTrace.getRootScope();if(tmpRootScope&&tmpRootScope.domainId){tmpDomainId=tmpRootScope.domainId}}}catch(e){}if(!tmpDomainId&&wiseTrace.domainId){tmpDomainId=wiseTrace.domainId}if(!tmpDomainId||tmpDomainId==="root"||tmpDomainId==="host"){if(isNeedReplace){tmpDomainId="$domainId$"}else{tmpDomainId=""}}else if(wiseTrace.needUserIdHash){tmpDomainId="**"+md5(tmpDomainId)}return tmpDomainId};wiseTrace.getPhysicalResolution=function(){var resolution="";try{resolution=window.screen.width+"x"+window.screen.height}catch(error){}return resolution};wiseTrace.getWebAvail=function(){var resolution="";try{resolution=document.body.clientWidth+"x"+document.body.clientHeight}catch(error){}return resolution};wiseTrace.clientType=function(){var type=0;if(!!/pcloudApp/i.test(navigator.userAgent)){type=2}else if(!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/)){type=1}return type};wiseTrace.setLinkInfo=function(opt){var tmpDomainId=wiseTrace.getDomainId(true);try{var fromgroupidhash="";var deviceId=wiseTrace.getDeviceId();var timeStamp=(new Date).getTime();var region=wiseTrace.getQueryString("region");var pageId="";var pos="";if(opt){if(window.wiseLinkInfo){fromgroupidhash=window.wiseLinkInfo}pageId=wiseTrace.getPreGroupUrl()+"|"+opt.id+"|"+opt.text;pos=opt.postion}else{if(window.lastPageGroupId){fromgroupidhash=window.lastPageGroupId}pageId=wiseTrace.getPreGroupUrl()+"||"}window.wiseLinkInfo=wiseTrace.version+"."+wiseTrace.base64Encode(pageId)+"."+tmpDomainId+"."+deviceId+"."+timeStamp;wiseTrace.extInfo[window.wiseLinkInfo]={from:fromgroupidhash,rgn:region,ct:wiseTrace.clientType(),scnres:wiseTrace.getPhysicalResolution(),brwres:wiseTrace.getWebAvail(),pos:pos,iframe:wiseTrace.getIframe()};if(!opt){wiseTrace.extInfo[window.wiseLinkInfo].referer=document&&document.referrer}if(!opt&&!wiseTrace.intfInvokeLogs.length){wiseTrace.intfInvokeLogs.push({groupId:window.wiseLinkInfo,startTime:(new Date).getTime(),url:""})}}catch(e){}};wiseTrace.getElementId=function(event){var id="0";try{if(event.target&&event.target.id){id=event.target.id}else{id=$(event.target).parent().attr("id");if(!id){id=$(event.target).parent().parent().attr("id");if(!id){id=$(event.target).parent().parent().parent().attr("id")}}}}catch(e){}if(!id){id="0"}return id};wiseTrace.getXpath=function(node){var path="";try{for(;node&&node.nodeType==Node.ELEMENT_NODE;node=node.parentNode){var prevIndex=0;for(var sib=node.previousElementSibling;sib;sib=sib.previousElementSibling){if(sib.tagName===node.tagName){prevIndex++}}var nextIndex=0;for(var sib=node.nextElementSibling;sib;sib=sib.nextElementSibling){if(sib.tagName===node.tagName){nextIndex++}}var xname=node.tagName.toLowerCase();if(prevIndex>=1||nextIndex>=1){xname+="["+(prevIndex+1)+"]"}path="/"+xname+path}}catch(err){}return path};wiseTrace.getBiName=function(event){var bi_name="";try{var count=1;var tmpElement=event&&event.target;var bi_name_arr=[];while($(tmpElement)&&$(tmpElement).length&&count<20){var tmpBiName=$(tmpElement).attr("bi_name");if(!tmpBiName){var tmpBiParentName=$(tmpElement).attr("bi_parent_name");if(tmpBiParentName){bi_name_arr.push(tmpBiParentName)}}else{bi_name_arr.push(tmpBiName)}tmpElement=$(tmpElement)&&$(tmpElement).parent()&&$(tmpElement).parent().get(0);count++}if(bi_name_arr&&bi_name_arr.length){bi_name_arr=bi_name_arr.reverse();bi_name=bi_name_arr.join("_");bi_name=bi_name.replace(/\|/g,"_")}}catch(error){}return bi_name};wiseTrace.initClick=function(){$(document).on("mousedown touchstart","div,button,span,a,li,input,select",function(event){if(event&&window.clickTimeStamp!==event.timeStamp){var postion=event.clientX+"x"+event.clientY;var id=wiseTrace.getElementId(event);if(id=="0"&&event.target){id=wiseTrace.getBiName(event);if(!id){id=wiseTrace.getXpath(event.target)}}var text=event.target&&event.target.textContent;if(!text){text=event.target&&event.target.value}if(!text){text=""}if(!id){id="0"}window.clickTimeStamp=event.timeStamp;wiseTrace.setCookie("plgid",window.pageGroupId,wiseTrace.cookieTime);var opt={id:id,eventAction:"",text:text&&text.substring(0,MAX_TEXT_LENGTH),postion:postion};wiseTrace.setLinkInfo(opt)}})};wiseTrace.setCookie=function(cname,cvalue,t){if(wiseTrace.needCookie){var d=new Date;d.setTime(d.getTime()+t);var expires="expires="+d.toUTCString();if(t){document.cookie=cname+"="+cvalue+";"+expires+";path=/;domain="+wiseTrace.cloudCookieDomain}else{document.cookie=cname+"="+cvalue+";path=/;domain="+wiseTrace.cloudCookieDomain}}};wiseTrace.getCookie=function(key){var value="";try{if(wiseTrace.needCookie){if(document.cookie){var consoleCookies=document.cookie.split(";");var cookie;for(var i=0;i<consoleCookies.length;i++){cookie=consoleCookies[i].split("=");if(cookie&&cookie.length>=2&&key===wiseTrace.trimEmpty(cookie[0])){value=wiseTrace.trimEmpty(cookie[1]);break}}}}}catch(err){}return value};wiseTrace.CRC32=function(str,seed){var C=seed^-1;for(var i=0,L=str.length,c,d;i<L;){c=str.charCodeAt(i++);if(c<128){C=C>>>8^T[(C^c)&255]}else if(c<2048){C=C>>>8^T[(C^(192|c>>6&31))&255];C=C>>>8^T[(C^(128|c&63))&255]}else if(c>=55296&&c<57344){c=(c&1023)+64;d=str.charCodeAt(i++)&1023;C=C>>>8^T[(C^(240|c>>8&7))&255];C=C>>>8^T[(C^(128|c>>2&63))&255];C=C>>>8^T[(C^(128|d>>6&15|(c&3)<<4))&255];C=C>>>8^T[(C^(128|d&63))&255]}else{C=C>>>8^T[(C^(224|c>>12&15))&255];C=C>>>8^T[(C^(128|c>>6&63))&255];C=C>>>8^T[(C^(128|c&63))&255]}}return C^-1};wiseTrace.getXMLRequestAndResponseInfo=function(jqXHR){var tmpObj={cbc:true};tmpObj.url=jqXHR.responseURL;if(!tmpObj.url){tmpObj.url=jqXHR.reqUrl}if(jqXHR.groupId){tmpObj.groupId=jqXHR.groupId}if(jqXHR.method){tmpObj.method=jqXHR.method}if(jqXHR["requestTime"]){tmpObj.startTime=jqXHR["requestTime"];tmpObj.delay=(new Date).getTime()-tmpObj.startTime}if(jqXHR["traceId"]){tmpObj.traceId=jqXHR["traceId"]}return tmpObj};wiseTrace.start=function(xhr){var data;if(xhr.readyState==4){var responseURL=xhr.responseURL;if(!responseURL){responseURL=xhr.reqUrl}if(xhr.status==200){data=xhr.response;if(!xhr.responseType&&xhr.response){try{data=JSON.parse(xhr.response)}catch(err){}}try{if(responseURL&&wiseTrace.apiWhiteListCheck(responseURL)){var urlKey=wiseTrace.CRC32(responseURL);var tmpObj=wiseTrace.getXMLRequestAndResponseInfo(xhr);if(xhr.getResponseHeader("wise_traceid")){tmpObj.traceId=xhr.getResponseHeader("wise_traceid")}tmpObj.retCode=wiseTrace.getCBCCode(data);tmpObj.cbcCode=tmpObj.retCode;if($.inArray(tmpObj.retCode,["0","CBC.0000"])>-1||$.inArray(tmpObj.retCode,wiseTrace.codeWhiteList)==-1){tmpObj.retCode="0"}else if(xhr.reqParam){tmpObj.reqParam=xhr.reqParam}if(wiseTrace.apiAutoReport&&tmpObj.groupId){wiseTrace.requestUrlMaps[urlKey]=true;wiseTrace.intfInvokeLogs.push(tmpObj)}}}catch(e){}}else{try{data=xhr.response;if(!xhr.responseType&&xhr.response){try{data=JSON.parse(xhr.response)}catch(err){}}if(responseURL&&wiseTrace.apiWhiteListCheck(responseURL)){var urlKey=wiseTrace.CRC32(responseURL);var tmpObj=wiseTrace.getXMLRequestAndResponseInfo(xhr);if(xhr.getResponseHeader("wise_traceid")){tmpObj.traceId=xhr.getResponseHeader("wise_traceid")}if(xhr.status){tmpObj.retCode=""+xhr.status}else{tmpObj.retCode="-1"}if(xhr.reqParam){tmpObj.reqParam=xhr.reqParam}tmpObj.cbcCode=wiseTrace.getCBCCode(data);if(wiseTrace.apiAutoReport&&tmpObj.groupId){wiseTrace.requestUrlMaps[urlKey]=true;wiseTrace.intfInvokeLogs.push(tmpObj)}}}catch(e){}}}};wiseTrace.initStateChange=function(tmpRootScope){var flag=false;tmpRootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams){try{if(toParams&&toParams[wiseTrace.hash_param]){wiseTrace.hash_param_value=toParams[wiseTrace.hash_param]}var injector=angular.element(document.body).injector();var $state=injector.get("$state");wiseTrace.hash=$state.href(toState.name);if(window.pageGroupId&&flag){window.lastPageGroupId=window.pageGroupId}else{flag=true}wiseTrace.setLinkInfo();window.pageGroupId=window.wiseLinkInfo}catch(err){}})};wiseTrace.complete=function(){wiseTrace.start(this)};wiseTrace.init=function(){wiseTrace.initClick();T=wiseTrace.signed_crc_table();wiseTrace.hookAjax({onreadystatechange:function(xhr){wiseTrace.start(xhr)},onload:function(xhr){wiseTrace.start(xhr)},send:function(arg,xhr){try{var tmpFlag=true;var traceId;if(tmpFlag&&window.wiseLinkInfo&&wiseTrace.apiWhiteListCheck(xhr.reqUrl)){var t=(new Date).getTime();if(wiseTrace.isConsole){traceId=wiseTrace.traceUuid();this.setRequestHeader("X-B3-Sampled",1);this.setRequestHeader("X-B3-TraceId",traceId);if(traceId){this.setRequestHeader("X-B3-SpanId",traceId.substring(16,32));xhr.traceId=traceId;this.traceId=traceId}}if(window.wiseLinkInfo&&window.wiseLinkInfo.indexOf("$domainId$")>-1){this.setRequestHeader("wise-groupid",window.wiseLinkInfo.replace("$domainId$",""))}else{this.setRequestHeader("wise-groupid",window.wiseLinkInfo)}xhr.groupId=window.wiseLinkInfo;xhr.requestTime=t;if(arg&&arg[0]&&typeof arg[0]=="string"){this.reqParam=arg[0].substring(0,200)}this.groupId=xhr.groupId;this.requestTime=t}}catch(err){}},open:function(arg,xhr){try{xhr.method=arg[0];xhr.reqUrl=arg[1];if(xhr&&xhr.reqUrl&&document&&document.location&&document.location.origin&&xhr.reqUrl.indexOf("http")===-1){xhr.reqUrl=document.location.origin+xhr.reqUrl}this.method=xhr.method;this.reqUrl=xhr.reqUrl;var host=document&&document.location&&document.location.host;if(host&&wiseTrace.ANGULAR.length&&new RegExp(wiseTrace.ANGULAR.join("|")).test(host)&&xhr["addEventListener"]){xhr["addEventListener"]("error",wiseTrace.complete);xhr["addEventListener"]("load",wiseTrace.complete);xhr["addEventListener"]("abort",wiseTrace.complete)}}catch(err){}}});if(!window.lastPageGroupId){window.lastPageGroupId=wiseTrace.getCookie("plgid")}if(window.lastPageGroupId){this.setCookie("plgid","",-1)}else{window.lastPageGroupId=""}var tmpRootScope=wiseTrace.getRootScope();if(tmpRootScope){wiseTrace.initStateChange(tmpRootScope)}else{wiseTrace.setLinkInfo();window.pageGroupId=window.wiseLinkInfo}setInterval(function(){wiseTrace.reportApi(true)},wiseTrace.reportTime)};wiseTrace.getDomain=function(){var tmpRootScope=wiseTrace.getRootScope();if(tmpRootScope){wiseTrace.initStateChange(tmpRootScope)}else{setTimeout(function(){wiseTrace.getDomain()},50)}};wiseTrace.bootstrap=function(){if(typeof angular!=="undefined"){var tmpRootScope=wiseTrace.getRootScope();wiseTrace.init();if(!tmpRootScope){wiseTrace.getDomain()}}else{wiseTrace.init()}};wiseTrace.initConfig();window.addEventListener("beforeunload",function(event){wiseTrace.reportApi(true)});if(window&&window.HWH5){window.addEventListener("hashchange",function(e){wiseTrace.setLinkInfo();window.pageGroupId=window.wiseLinkInfo})}if(wiseTrace.apiAutoReport){wiseTrace.bootstrap()}window.wiseTrace=wiseTrace})(window.$)}try{if(wiseTrace.needImportPmpJs){if(window&&!window.PMP){!function(c,b,d,a){c[a]||(c[a]={});var tm=b.createElement("script");tm.src=d;var s=b.getElementsByTagName("script")[0];s.parentNode.insertBefore(tm,s)}(window,document,"https://res-static1.huaweicloud.com/content/dam/cloudbu-site/archive/commons/web_resoure/framework/portal/pmp/pmp.js","_pmp")}}if(wiseTrace.needImportTinyReporterJs&&!window._tm){!function(c,b,d,a){c[a]||(c[a]={});var tm=b.createElement("script");tm.src=d;var s=b.getElementsByTagName("script")[0];s.parentNode.insertBefore(tm,s)}(window,document,"https://res-static1.huaweicloud.com/content/dam/cloudbu-site/archive/commons/web_resoure/tinyreporter/tinyReporter.min.js","_tm")}}catch(error){}